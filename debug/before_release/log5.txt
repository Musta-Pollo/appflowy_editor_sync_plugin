Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: ZMesKH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZMesKH: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"1\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZMesKH": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: ZMesKH
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: ZMesKH
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has no prev_id
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: ZMesKH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZMesKH: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"11\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [],
flutter:     "p0ij_u": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: ZMesKH
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: ZMesKH
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has no prev_id
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]

----- Sorting children of parent: ZMesKH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZMesKH: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
insert_node: Starting for block_id: Mrfv06
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=Mrfv06, prev_id=Some("ZMesKH")
  Finding blocks that reference prev_id: ZMesKH
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 5 total blocks to check
  Checking block: Mrfv06
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 blocks with prev_id ZMesKH: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=Mrfv06, next_id=None, prev_id=Some("ZMesKH")
  Using prev_id strategy (prev_id=ZMesKH)
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 5 total blocks to check
  Checking block: Mrfv06
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 nodes that reference prev_id ZMesKH: []
  Finished prev_id strategy
  Setting prev_id of block Mrfv06 to ZMesKH
insert_node: Finished for block_id: Mrfv06
update_node: Updating block_id: ZMesKH
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
update_node: Updated block_id: ZMesKH
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]

----- Sorting children of parent: Mrfv06 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent Mrfv06: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block Mrfv06 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block Mrfv06 has prev_id ZMesKH
Block ZMesKH has no prev_id
Built prev->next map with 1 entries
  - ZMesKH has 1 next blocks: ["Mrfv06"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
    Pushing Mrfv06 onto stack
  Adding block Mrfv06 to sorted list
  No next blocks for Mrfv06
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH", "Mrfv06"]

----- Sorting children of parent: ZMesKH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZMesKH: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "Mrfv06": {
flutter:       "id": "Mrfv06",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.597732",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [],
flutter:     "Mrfv06": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH",
flutter:       "Mrfv06"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
delete_node: Starting for block_id: Mrfv06
remove_block_from_prev_id_chain: Removing block Mrfv06 from chain
  Block Mrfv06 has prev_id: ZMesKH
  Finding blocks that reference Mrfv06 as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = Mrfv06
  Found 5 total blocks to check
  Checking block: Mrfv06
    Block has prev_id: ZMesKH, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = Mrfv06: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
delete_node: Successfully deleted block_id: Mrfv06
insert_node: Starting for block_id: 2Mr_tS
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=2Mr_tS, prev_id=None
  No prev_id provided, nothing to handle
handle_prev_id_chain: Completed
handle_following_connection: block_id=2Mr_tS, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
insert_node: Finished for block_id: 2Mr_tS
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 18 updates for doc_id: xxxx
apply_updates: Starting with 18 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: 2Mr_tS
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 1 operations
update_node: Updated block_id: 2Mr_tS
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 19 updates for doc_id: xxxx
apply_updates: Starting with 19 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has no prev_id
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"2\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: 2Mr_tS
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: 2Mr_tS
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 20 updates for doc_id: xxxx
apply_updates: Starting with 20 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"22\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ],
flutter:     "2Mr_tS": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: 2Mr_tS
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: 2Mr_tS
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 21 updates for doc_id: xxxx
apply_updates: Starting with 21 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "2Mr_tS": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
insert_node: Starting for block_id: zq8MPg
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=zq8MPg, prev_id=Some("2Mr_tS")
  Finding blocks that reference prev_id: 2Mr_tS
find_block_referencing_prev_id: Searching for blocks with prev_id = 2Mr_tS
  Found 6 total blocks to check
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zq8MPg
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = 2Mr_tS: []
  Found 0 blocks with prev_id 2Mr_tS: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=zq8MPg, next_id=None, prev_id=Some("2Mr_tS")
  Using prev_id strategy (prev_id=2Mr_tS)
find_block_referencing_prev_id: Searching for blocks with prev_id = 2Mr_tS
  Found 6 total blocks to check
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zq8MPg
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = 2Mr_tS: []
  Found 0 nodes that reference prev_id 2Mr_tS: []
  Finished prev_id strategy
  Setting prev_id of block zq8MPg to 2Mr_tS
insert_node: Finished for block_id: zq8MPg
update_node: Updating block_id: 2Mr_tS
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
update_node: Updated block_id: 2Mr_tS
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 22 updates for doc_id: xxxx
apply_updates: Starting with 22 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block zq8MPg assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block zq8MPg has prev_id 2Mr_tS
Block 2Mr_tS has no prev_id
Built prev->next map with 1 entries
  - 2Mr_tS has 1 next blocks: ["zq8MPg"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
    Pushing zq8MPg onto stack
  Adding block zq8MPg to sorted list
  No next blocks for zq8MPg
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS", "zq8MPg"]

----- Sorting children of parent: zq8MPg -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zq8MPg: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zq8MPg": {
flutter:       "id": "zq8MPg",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:06.829460"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": "2Mr_tS",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS",
flutter:       "zq8MPg"
flutter:     ],
flutter:     "zq8MPg": [],
flutter:     "p0ij_u": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
delete_node: Starting for block_id: zq8MPg
remove_block_from_prev_id_chain: Removing block zq8MPg from chain
  Block zq8MPg has prev_id: 2Mr_tS
  Finding blocks that reference zq8MPg as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = zq8MPg
  Found 6 total blocks to check
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: zq8MPg
    Block has prev_id: 2Mr_tS, matches target: false
find_block_referencing_prev_id: Found 0 blocks with prev_id = zq8MPg: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
delete_node: Successfully deleted block_id: zq8MPg
insert_node: Starting for block_id: VE3LLU
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=VE3LLU, prev_id=Some("ZMesKH")
  Finding blocks that reference prev_id: ZMesKH
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: VE3LLU
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 blocks with prev_id ZMesKH: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=VE3LLU, next_id=None, prev_id=Some("ZMesKH")
  Using prev_id strategy (prev_id=ZMesKH)
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: VE3LLU
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 nodes that reference prev_id ZMesKH: []
  Finished prev_id strategy
  Setting prev_id of block VE3LLU to ZMesKH
insert_node: Finished for block_id: VE3LLU
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 23 updates for doc_id: xxxx
apply_updates: Starting with 23 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: VE3LLU -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent VE3LLU: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: OyExfD -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has no prev_id
Built prev->next map with 1 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
  No next blocks for zx_hH9
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9"]

----- Sorting children of parent: zx_hH9 -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block VE3LLU assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 2 blocks
Block ZMesKH has no prev_id
Block VE3LLU has prev_id ZMesKH
Built prev->next map with 1 entries
  - ZMesKH has 1 next blocks: ["VE3LLU"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
    Pushing VE3LLU onto stack
  Adding block VE3LLU to sorted list
  No next blocks for VE3LLU
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH", "VE3LLU"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "VE3LLU": {
flutter:       "id": "VE3LLU",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.108397"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "VE3LLU": [],
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9"
flutter:     ],
flutter:     "zx_hH9": [
flutter:       "ZMesKH",
flutter:       "VE3LLU"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
delete_node: Starting for block_id: VE3LLU
remove_block_from_prev_id_chain: Removing block VE3LLU from chain
  Block VE3LLU has prev_id: ZMesKH
  Finding blocks that reference VE3LLU as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = VE3LLU
  Found 6 total blocks to check
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: VE3LLU
    Block has prev_id: ZMesKH, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = VE3LLU: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
delete_node: Successfully deleted block_id: VE3LLU
insert_node: Starting for block_id: 60N2t3
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=60N2t3, prev_id=Some("zx_hH9")
  Finding blocks that reference prev_id: zx_hH9
find_block_referencing_prev_id: Searching for blocks with prev_id = zx_hH9
  Found 6 total blocks to check
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 60N2t3
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = zx_hH9: []
  Found 0 blocks with prev_id zx_hH9: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=60N2t3, next_id=None, prev_id=Some("zx_hH9")
  Using prev_id strategy (prev_id=zx_hH9)
find_block_referencing_prev_id: Searching for blocks with prev_id = zx_hH9
  Found 6 total blocks to check
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 60N2t3
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = zx_hH9: []
  Found 0 nodes that reference prev_id zx_hH9: []
  Finished prev_id strategy
  Setting prev_id of block 60N2t3 to zx_hH9
insert_node: Finished for block_id: 60N2t3
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 24 updates for doc_id: xxxx
apply_updates: Starting with 24 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has no prev_id
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: 60N2t3
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 1 operations
update_node: Updated block_id: 60N2t3
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 25 updates for doc_id: xxxx
apply_updates: Starting with 25 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block 60N2t3 has prev_id zx_hH9
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"c\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "60N2t3": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: 60N2t3
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: 60N2t3
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 26 updates for doc_id: xxxx
apply_updates: Starting with 26 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"cc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "60N2t3": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: 60N2t3
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: 60N2t3
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 27 updates for doc_id: xxxx
apply_updates: Starting with 27 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 23 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 28 updates for doc_id: xxxx
apply_updates: Starting with 28 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "60N2t3": [],
flutter:     "2Mr_tS": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(158.5, 128.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(160.1, 123.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(160.8, 114.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(161.9, 112.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(162.7, 111.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(163.1, 107.8)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(164.1, 106.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(164.8, 105.0)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.1, 104.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.6, 102.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.8, 102.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.3, 101.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.3, 101.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(168.1, 99.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(168.6, 98.8)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(169.4, 97.8)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(169.6, 97.5)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(170.6, 96.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.6, 94.5)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.6, 93.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.6, 89.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.4, 84.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.4, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.7, 83.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.9, 83.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(174.2, 82.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: onDragEnd, acceptedPath([1])
flutter: the drag offset is inside the block, dragOffset(Offset(174.2, 82.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [1, 0]) to path([0])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: zx_hH9 to parent: p0ij_u
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: p0ij_u
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 26 updates for doc_id: xxxx
apply_updates: Starting with 26 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has no prev_id
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent p0ij_u: ["ZMesKH"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "p0ij_u",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "60N2t3": [],
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 27 updates for doc_id: xxxx
apply_updates: Starting with 27 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: p0ij_u -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent p0ij_u: ["ZMesKH"]

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "p0ij_u",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "zx_hH9": [],
flutter:     "p0ij_u": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "2Mr_tS": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(181.3, 178.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(181.6, 179.3)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.7, 181.5)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.7, 182.3)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.7, 183.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.7, 184.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.7, 186.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.7, 187.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.7, 192.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.3, 194.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.3, 195.0)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.3, 195.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.3, 195.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: onDragEnd, acceptedPath([2])
flutter: the drag offset is inside the block, dragOffset(Offset(182.3, 195.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [0, 0]) to path([1])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: p0ij_u to parent: zx_hH9
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 5 updates for doc_id: xxxx
apply_updates: Starting with 5 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "2Mr_tS": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "60N2t3": [],
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 208.7)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 211.0)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 212.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 214.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 216.6)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 217.7)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 221.2)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(170.2, 227.9)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(168.8, 231.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.2, 236.2)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.4, 236.7)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.2, 237.0)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(164.4, 237.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(160.5, 238.2)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(158.2, 238.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(157.4, 239.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(155.1, 239.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(153.5, 239.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(152.7, 239.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(152.5, 239.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(152.2, 239.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(152.0, 239.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(151.7, 239.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: onDragEnd, acceptedPath([3])
flutter: the drag offset is inside the block, dragOffset(Offset(151.7, 239.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [1, 0]) to path([2])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: zx_hH9 to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=None, prev_id=Some("60N2t3")
  Using prev_id strategy (prev_id=60N2t3)
find_block_referencing_prev_id: Searching for blocks with prev_id = 60N2t3
  Found 6 total blocks to check
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = 60N2t3: []
  Found 0 nodes that reference prev_id 60N2t3: []
  Finished prev_id strategy
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Block ZMesKH has prev_id 60N2t3
Block p0ij_u has no prev_id
Built prev->next map with 3 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - 60N2t3 has 1 next blocks: ["ZMesKH"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3", "ZMesKH"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "60N2t3",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "60N2t3": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3",
flutter:       "ZMesKH"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "p0ij_u": [],
flutter:     "2Mr_tS": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Block ZMesKH has prev_id 60N2t3
Built prev->next map with 3 entries
  - 60N2t3 has 1 next blocks: ["ZMesKH"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3", "ZMesKH"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "60N2t3",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "60N2t3": [],
flutter:     "zx_hH9": [],
flutter:     "2Mr_tS": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3",
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 169.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(153.9, 156.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(156.8, 153.1)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(158.6, 151.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(161.3, 147.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(163.5, 145.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(164.4, 143.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.6, 142.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.9, 141.8)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.9, 141.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.1, 141.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(168.4, 139.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(170.2, 137.2)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.2, 135.8)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.2, 134.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.2, 132.2)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(174.0, 130.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(174.6, 129.0)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: onDragEnd, acceptedPath([2])
flutter: the drag offset is inside the block, dragOffset(Offset(174.6, 129.0)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [3]) to path([1])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: OyExfD to parent: zx_hH9
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Block ZMesKH has prev_id: 60N2t3
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: ZMesKH
    Block has prev_id: 60N2t3, matches target: false
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block 60N2t3 has prev_id zx_hH9
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "60N2t3": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "2Mr_tS": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(153.8, 130.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(153.8, 123.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(154.6, 116.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(154.6, 109.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(157.0, 100.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(157.0, 99.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(157.0, 98.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(157.4, 97.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(157.6, 96.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(158.1, 96.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(158.6, 95.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(160.1, 93.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(163.0, 90.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.0, 88.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.3, 87.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.5, 87.3)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.0, 86.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.3, 86.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.8, 86.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(167.0, 86.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(167.3, 85.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(167.8, 85.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(168.6, 85.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(169.3, 85.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(169.8, 85.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.3, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(174.4, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(175.8, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.3, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.6, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(178.9, 83.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(179.4, 83.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(180.0, 83.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(180.5, 83.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(180.7, 83.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(181.0, 82.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: onDragEnd, acceptedPath([1])
flutter: the drag offset is inside the block, dragOffset(Offset(181.0, 82.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [1, 0]) to path([0])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: zx_hH9 to parent: p0ij_u
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent p0ij_u: ["ZMesKH"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "p0ij_u",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "p0ij_u": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "2Mr_tS": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent p0ij_u: ["ZMesKH"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "p0ij_u",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "2Mr_tS": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(167.2, 171.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(168.7, 175.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(170.8, 179.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 181.0)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 181.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 182.3)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 183.1)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 184.1)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 184.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 185.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 186.1)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 186.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 186.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 187.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 187.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.1, 188.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(171.9, 189.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.4, 189.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.7, 191.1)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.7, 191.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.7, 191.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.7, 192.3)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.0, 192.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.2, 193.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.2, 193.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.5, 194.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.5, 194.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.5, 194.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: onDragEnd, acceptedPath([2])
flutter: the drag offset is inside the block, dragOffset(Offset(173.5, 194.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [0, 0]) to path([1])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: p0ij_u to parent: zx_hH9
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: zx_hH9 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent zx_hH9: ["ZMesKH"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Block p0ij_u has no prev_id
Built prev->next map with 2 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "zx_hH9",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "zx_hH9": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(174.2, 212.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(175.6, 220.9)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(175.6, 222.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.0, 223.2)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.0, 223.7)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.0, 223.9)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.0, 224.4)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.0, 225.2)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.0, 225.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 226.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 226.7)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 227.0)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 227.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 227.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 228.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 228.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.5, 229.0)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(176.7, 229.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: onDragEnd, acceptedPath([3])
flutter: the drag offset is inside the block, dragOffset(Offset(176.7, 229.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [1, 0]) to path([2])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: zx_hH9 to parent: 60N2t3
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: 60N2t3 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent 60N2t3: ["ZMesKH"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "60N2t3",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "p0ij_u": [],
flutter:     "60N2t3": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block ZMesKH has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
  No next blocks for ZMesKH
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent 60N2t3: ["ZMesKH"]

----- Sorting children of parent: OyExfD -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 3 blocks
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Block p0ij_u has no prev_id
Built prev->next map with 2 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "60N2t3",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "60N2t3": [
flutter:       "ZMesKH"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "2Mr_tS": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "zx_hH9": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(146.6, 167.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.2, 162.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(144.8, 160.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(144.0, 158.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.7, 157.5)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.7, 155.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.1, 155.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 154.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 154.1)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 153.6)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 153.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 153.1)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 152.8)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: onDragEnd, acceptedPath([2])
flutter: the drag offset is inside the block, dragOffset(Offset(142.9, 152.8)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 246.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [2, 0]) to path([2])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: 60N2t3 to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZMesKH: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=Some("60N2t3"), prev_id=Some("zx_hH9")
  Using prev_id strategy (prev_id=zx_hH9)
find_block_referencing_prev_id: Searching for blocks with prev_id = zx_hH9
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: true
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = zx_hH9: ["60N2t3"]
  Found 1 nodes that reference prev_id zx_hH9: ["60N2t3"]
  Updating block 60N2t3 to point to ZMesKH
  Finished prev_id strategy
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id ZMesKH
Block zx_hH9 has prev_id p0ij_u
Block ZMesKH has prev_id zx_hH9
Built prev->next map with 3 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["ZMesKH"]
  - ZMesKH has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "ZMesKH", "60N2t3"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "ZMesKH",
flutter:       "60N2t3"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "60N2t3": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id ZMesKH
Block ZMesKH has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 3 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["ZMesKH"]
  - ZMesKH has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "ZMesKH", "60N2t3"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "ZMesKH",
flutter:       "60N2t3"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "p0ij_u": [],
flutter:     "2Mr_tS": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(135.2, 130.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(137.6, 121.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.4, 116.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.4, 106.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.4, 99.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.4, 98.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.4, 96.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.1, 96.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: onDragEnd, acceptedPath([1])
flutter: the drag offset is inside the block, dragOffset(Offset(138.1, 96.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 132.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [2]) to path([1])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: OyExfD to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Block ZMesKH has prev_id: zx_hH9
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: 60N2t3
    Block has prev_id: ZMesKH, matches target: true
  Checking block: ZMesKH
    Block has prev_id: zx_hH9, matches target: false
  Checking block: p0ij_u
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZMesKH: ["60N2t3"]
  Found 1 next blocks: ["60N2t3"]
  Updating next block 60N2t3 to point to zx_hH9 (was pointing to ZMesKH)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=Some("zx_hH9"), prev_id=Some("p0ij_u")
  Using prev_id strategy (prev_id=p0ij_u)
find_block_referencing_prev_id: Searching for blocks with prev_id = p0ij_u
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: true
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: ZMesKH
    Block has prev_id: zx_hH9, matches target: false
  Checking block: p0ij_u
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = p0ij_u: ["zx_hH9"]
  Found 1 nodes that reference prev_id p0ij_u: ["zx_hH9"]
  Updating block zx_hH9 to point to ZMesKH
  Finished prev_id strategy
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block zx_hH9 has prev_id ZMesKH
Block ZMesKH has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Block p0ij_u has no prev_id
Built prev->next map with 3 entries
  - ZMesKH has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["ZMesKH"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "ZMesKH", "zx_hH9", "60N2t3"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "ZMesKH",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "zx_hH9": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id ZMesKH
Block ZMesKH has prev_id p0ij_u
Built prev->next map with 3 entries
  - ZMesKH has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["ZMesKH"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "ZMesKH", "zx_hH9", "60N2t3"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "60N2t3": [],
flutter:     "zx_hH9": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "ZMesKH",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(125.5, 93.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.8, 92.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.8, 91.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(126.3, 90.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(126.3, 89.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(126.3, 89.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(126.3, 87.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(126.7, 86.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(127.2, 86.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(127.2, 85.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(127.5, 85.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(127.5, 84.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(127.5, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.0, 83.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.4, 82.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.4, 81.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.4, 81.3)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 80.3)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 80.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 79.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 79.3)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 78.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 78.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 77.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 77.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 76.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 76.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.9, 75.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 75.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 75.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 75.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 74.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 73.3)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 72.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 72.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 71.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 71.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 71.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: onDragEnd, acceptedPath([0])
flutter: the drag offset is inside the block, dragOffset(Offset(128.6, 71.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [1]) to path([0])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: OyExfD to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Block ZMesKH has prev_id: p0ij_u
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: zx_hH9
    Block has prev_id: ZMesKH, matches target: true
  Checking block: ZMesKH
    Block has prev_id: p0ij_u, matches target: false
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZMesKH: ["zx_hH9"]
  Found 1 next blocks: ["zx_hH9"]
  Updating next block zx_hH9 to point to p0ij_u (was pointing to ZMesKH)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=Some("p0ij_u"), prev_id=None
  Using next_id strategy (next_id=p0ij_u)
  Setting prev_id of next block p0ij_u to ZMesKH
  Attempting to copy device and timestamp from next block p0ij_u to ZMesKH
  WARNING: Next block has no device attribute
  WARNING: Next block has no timestamp attribute
  Finished next_id strategy
handle_following_connection: Completed
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block ZMesKH has no prev_id
Block p0ij_u has prev_id ZMesKH
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 3 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - ZMesKH has 1 next blocks: ["p0ij_u"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
    Pushing p0ij_u onto stack
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["ZMesKH", "p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "zx_hH9": [],
flutter:     "60N2t3": [],
flutter:     "p0ij_u": [],
flutter:     "OyExfD": [
flutter:       "ZMesKH",
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has prev_id ZMesKH
Block ZMesKH has no prev_id
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 3 entries
  - ZMesKH has 1 next blocks: ["p0ij_u"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
    Pushing p0ij_u onto stack
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["ZMesKH", "p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "OyExfD": [
flutter:       "ZMesKH",
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "60N2t3": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(136.9, 135.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.9, 138.1)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.3, 145.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.3, 148.8)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.3, 150.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.9, 156.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.7, 161.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.7, 163.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.1, 169.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.4, 170.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.1, 170.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(141.6, 170.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(141.4, 169.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: onDragEnd, acceptedPath([2])
flutter: the drag offset is inside the block, dragOffset(Offset(141.4, 169.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [0]) to path([1])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: OyExfD to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: p0ij_u
    Block has prev_id: ZMesKH, matches target: true
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZMesKH: ["p0ij_u"]
  Found 1 next blocks: ["p0ij_u"]
  Removing prev_id from next block p0ij_u (was pointing to ZMesKH)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=Some("zx_hH9"), prev_id=Some("p0ij_u")
  Using prev_id strategy (prev_id=p0ij_u)
find_block_referencing_prev_id: Searching for blocks with prev_id = p0ij_u
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: true
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: ZMesKH
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = p0ij_u: ["zx_hH9"]
  Found 1 nodes that reference prev_id p0ij_u: ["zx_hH9"]
  Updating block zx_hH9 to point to ZMesKH
  Finished prev_id strategy
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block zx_hH9 has prev_id ZMesKH
Block 60N2t3 has prev_id zx_hH9
Block ZMesKH has prev_id p0ij_u
Built prev->next map with 3 entries
  - ZMesKH has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["ZMesKH"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "ZMesKH", "zx_hH9", "60N2t3"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "zx_hH9": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "ZMesKH",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "2Mr_tS": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block ZMesKH has prev_id p0ij_u
Block zx_hH9 has prev_id ZMesKH
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 3 entries
  - p0ij_u has 1 next blocks: ["ZMesKH"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - ZMesKH has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "ZMesKH", "zx_hH9", "60N2t3"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "zx_hH9": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "ZMesKH",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": [],
flutter:     "2Mr_tS": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(123.7, 92.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(123.7, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(123.7, 80.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(123.7, 80.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(124.1, 78.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(124.1, 78.3)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(124.1, 78.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(124.5, 77.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.0, 76.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.2, 76.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.2, 74.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.2, 73.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.2, 72.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.9, 70.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(125.9, 70.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(126.1, 70.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(126.1, 69.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: onDragEnd, acceptedPath([0])
flutter: the drag offset is inside the block, dragOffset(Offset(126.1, 69.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [1]) to path([0])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: OyExfD to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Block ZMesKH has prev_id: p0ij_u
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: zx_hH9
    Block has prev_id: ZMesKH, matches target: true
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: ZMesKH
    Block has prev_id: p0ij_u, matches target: false
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZMesKH: ["zx_hH9"]
  Found 1 next blocks: ["zx_hH9"]
  Updating next block zx_hH9 to point to p0ij_u (was pointing to ZMesKH)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=Some("p0ij_u"), prev_id=None
  Using next_id strategy (next_id=p0ij_u)
  Setting prev_id of next block p0ij_u to ZMesKH
  Attempting to copy device and timestamp from next block p0ij_u to ZMesKH
  WARNING: Next block has no device attribute
  WARNING: Next block has no timestamp attribute
  Finished next_id strategy
handle_following_connection: Completed
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block ZMesKH has no prev_id
Block zx_hH9 has prev_id p0ij_u
Block p0ij_u has prev_id ZMesKH
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 3 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - ZMesKH has 1 next blocks: ["p0ij_u"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
    Pushing p0ij_u onto stack
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["ZMesKH", "p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "60N2t3": [],
flutter:     "zx_hH9": [],
flutter:     "OyExfD": [
flutter:       "ZMesKH",
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block ZMesKH has no prev_id
Block p0ij_u has prev_id ZMesKH
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 3 entries
  - p0ij_u has 1 next blocks: ["zx_hH9"]
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - ZMesKH has 1 next blocks: ["p0ij_u"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["ZMesKH"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["ZMesKH"]
Starting chain from root: ZMesKH
  Adding block ZMesKH to sorted list
    Pushing p0ij_u onto stack
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["ZMesKH", "p0ij_u", "zx_hH9", "60N2t3"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "zx_hH9": [],
flutter:     "OyExfD": [
flutter:       "ZMesKH",
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 134.6)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 135.1)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 135.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 137.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 137.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 138.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 140.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 141.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 143.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.2, 143.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(135.8, 144.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(135.8, 145.2)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(135.5, 145.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(135.3, 147.3)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(134.8, 148.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(133.3, 152.5)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(132.7, 156.0)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.9, 160.8)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.9, 161.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.6, 162.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.4, 162.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.1, 163.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(129.9, 163.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: onDragEnd, acceptedPath([2])
flutter: the drag offset is inside the block, dragOffset(Offset(129.9, 163.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [0]) to path([1])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: OyExfD to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: p0ij_u
    Block has prev_id: ZMesKH, matches target: true
  Checking block: ZMesKH
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZMesKH: ["p0ij_u"]
  Found 1 next blocks: ["p0ij_u"]
  Removing prev_id from next block p0ij_u (was pointing to ZMesKH)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=Some("zx_hH9"), prev_id=Some("p0ij_u")
  Using prev_id strategy (prev_id=p0ij_u)
find_block_referencing_prev_id: Searching for blocks with prev_id = p0ij_u
  Found 6 total blocks to check
  Checking block: OyExfD
    Block does not have prev_id
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: true
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: ZMesKH
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = p0ij_u: ["zx_hH9"]
  Found 1 nodes that reference prev_id p0ij_u: ["zx_hH9"]
  Updating block zx_hH9 to point to ZMesKH
  Finished prev_id strategy
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block ZMesKH has prev_id p0ij_u
Block 60N2t3 has prev_id zx_hH9
Block zx_hH9 has prev_id ZMesKH
Block p0ij_u has no prev_id
Built prev->next map with 3 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["ZMesKH"]
  - ZMesKH has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "ZMesKH", "zx_hH9", "60N2t3"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "zx_hH9": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "ZMesKH",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "60N2t3": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block ZMesKH has prev_id p0ij_u
Block zx_hH9 has prev_id ZMesKH
Block 60N2t3 has prev_id zx_hH9
Built prev->next map with 3 entries
  - zx_hH9 has 1 next blocks: ["60N2t3"]
  - ZMesKH has 1 next blocks: ["zx_hH9"]
  - p0ij_u has 1 next blocks: ["ZMesKH"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "ZMesKH", "zx_hH9", "60N2t3"]

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "p0ij_u": [],
flutter:     "2Mr_tS": [],
flutter:     "zx_hH9": [],
flutter:     "60N2t3": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "ZMesKH",
flutter:       "zx_hH9",
flutter:       "60N2t3"
flutter:     ],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ]
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(130.9, 170.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.5, 175.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.5, 177.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 178.8)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 179.5)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 180.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 182.0)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 184.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 186.5)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 190.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 193.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.2, 195.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.4, 196.1)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.4, 196.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.8, 199.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.8, 199.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.8, 200.4)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(130.8, 201.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(131.3, 201.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(131.3, 202.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(131.3, 203.0)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: onDragEnd, acceptedPath([3])
flutter: the drag offset is inside the block, dragOffset(Offset(131.3, 203.0)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: Moving node(Node(id: ZMesKH, type: paragraph, attributes: {delta: [{insert: 111}], device: c81de210-453b-4917-a781-4ac5ca4d7303, timestamp: 2025-04-24T19:15:04.716329}, children: [Node(id: 2Mr_tS, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:15:05.771632, device: c81de210-453b-4917-a781-4ac5ca4d7303}, children: [])]), [1]) to path([2])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZMesKH from parent: OyExfD to parent: OyExfD
remove_block_from_prev_id_chain: Removing block ZMesKH from chain
  Block ZMesKH has prev_id: p0ij_u
  Finding blocks that reference ZMesKH as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZMesKH
  Found 6 total blocks to check
  Checking block: zx_hH9
    Block has prev_id: ZMesKH, matches target: true
  Checking block: ZMesKH
    Block has prev_id: p0ij_u, matches target: false
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: false
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZMesKH: ["zx_hH9"]
  Found 1 next blocks: ["zx_hH9"]
  Updating next block zx_hH9 to point to p0ij_u (was pointing to ZMesKH)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZMesKH, next_id=Some("60N2t3"), prev_id=Some("zx_hH9")
  Using prev_id strategy (prev_id=zx_hH9)
find_block_referencing_prev_id: Searching for blocks with prev_id = zx_hH9
  Found 6 total blocks to check
  Checking block: zx_hH9
    Block has prev_id: p0ij_u, matches target: false
  Checking block: ZMesKH
    Block has prev_id: p0ij_u, matches target: false
  Checking block: 60N2t3
    Block has prev_id: zx_hH9, matches target: true
  Checking block: p0ij_u
    Block does not have prev_id
  Checking block: 2Mr_tS
    Block does not have prev_id
  Checking block: OyExfD
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = zx_hH9: ["60N2t3"]
  Found 1 nodes that reference prev_id zx_hH9: ["60N2t3"]
  Updating block 60N2t3 to point to ZMesKH
  Finished prev_id strategy
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block ZMesKH has prev_id zx_hH9
Block zx_hH9 has prev_id p0ij_u
Block 60N2t3 has prev_id ZMesKH
Block p0ij_u has no prev_id
Built prev->next map with 3 entries
  - zx_hH9 has 1 next blocks: ["ZMesKH"]
  - ZMesKH has 1 next blocks: ["60N2t3"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "ZMesKH", "60N2t3"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:05.771632"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384138",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:04.716329",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:07.324450"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "60N2t3": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "zx_hH9": [],
flutter:     "2Mr_tS": [],
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "ZMesKH",
flutter:       "60N2t3"
flutter:     ],
flutter:     "p0ij_u": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 18 updates for doc_id: xxxx
apply_updates: Starting with 18 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: 60N2t3 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 60N2t3: []

----- Sorting children of parent: ZMesKH -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block 2Mr_tS assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 blocks
Block 2Mr_tS has no prev_id
Built prev->next map with 0 entries
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["2Mr_tS"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["2Mr_tS"]
Starting chain from root: 2Mr_tS
  Adding block 2Mr_tS to sorted list
  No next blocks for 2Mr_tS
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent ZMesKH: ["2Mr_tS"]

----- Sorting children of parent: zx_hH9 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent zx_hH9: []

----- Sorting children of parent: 2Mr_tS -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 2Mr_tS: []

----- Sorting children of parent: p0ij_u -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent p0ij_u: []

----- Sorting children of parent: OyExfD -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block p0ij_u assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block ZMesKH assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block 60N2t3 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Block zx_hH9 assigned to device c81de210-453b-4917-a781-4ac5ca4d7303
Grouped blocks into 1 devices
  - Device c81de210-453b-4917-a781-4ac5ca4d7303 has 4 blocks
Block p0ij_u has no prev_id
Block ZMesKH has prev_id zx_hH9
Block 60N2t3 has prev_id ZMesKH
Block zx_hH9 has prev_id p0ij_u
Built prev->next map with 3 entries
  - ZMesKH has 1 next blocks: ["60N2t3"]
  - zx_hH9 has 1 next blocks: ["ZMesKH"]
  - p0ij_u has 1 next blocks: ["zx_hH9"]
Device c81de210-453b-4917-a781-4ac5ca4d7303 has 1 root blocks: ["p0ij_u"]
Processing devices in order: ["c81de210-453b-4917-a781-4ac5ca4d7303"]

Processing device: c81de210-453b-4917-a781-4ac5ca4d7303
Sorted roots for device c81de210-453b-4917-a781-4ac5ca4d7303: ["p0ij_u"]
Starting chain from root: p0ij_u
  Adding block p0ij_u to sorted list
    Pushing zx_hH9 onto stack
  Adding block zx_hH9 to sorted list
    Pushing ZMesKH onto stack
  Adding block ZMesKH to sorted list
    Pushing 60N2t3 onto stack
  Adding block 60N2t3 to sorted list
  No next blocks for 60N2t3
No remaining blocks for device c81de210-453b-4917-a781-4ac5ca4d7303
No globally remaining blocks
Final sorted order for parent OyExfD: ["p0ij_u", "zx_hH9", "ZMesKH", "60N2t3"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "60N2t3": {
flutter:       "id": "60N2t3",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:07.324450",
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "ZMesKH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "zx_hH9": {
flutter:       "id": "zx_hH9",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:03.447081"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "p0ij_u",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "2Mr_tS": {
flutter:       "id": "2Mr_tS",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:05.771632",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZMesKH",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "p0ij_u": {
flutter:       "id": "p0ij_u",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:15:01.384299",
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "OyExfD": {
flutter:       "id": "OyExfD",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "timestamp": "2025-04-24T19:15:01.384138"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZMesKH": {
flutter:       "id": "ZMesKH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "c81de210-453b-4917-a781-4ac5ca4d7303",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:15:04.716329"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "OyExfD",
flutter:       "prevId": "zx_hH9",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "OyExfD": [
flutter:       "p0ij_u",
flutter:       "zx_hH9",
flutter:       "ZMesKH",
flutter:       "60N2t3"
flutter:     ],
flutter:     "2Mr_tS": [],
flutter:     "p0ij_u": [],
flutter:     "60N2t3": [],
flutter:     "ZMesKH": [
flutter:       "2Mr_tS"
flutter:     ],
flutter:     "zx_hH9": []
flutter:   },
flutter:   "rootId": "OyExfD"
flutter: }
