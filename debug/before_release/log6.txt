Creating new document service
init_empty_doc: Starting for doc_id: xxxx
init_empty_doc: Initializing blocks for doc_id: xxxx
init_empty_doc: Initializing childrenMap for doc_id: xxxx
init_empty_doc: Encoding state for doc_id: xxxx
init_empty_doc: Finished for doc_id: xxxx
apply_action: Starting with 2 actions for doc_id: xxxx
insert_node: Starting for block_id: xasNtY
handle_prev_id_chain: block_id=xasNtY, prev_id=None
  No prev_id provided, nothing to handle
handle_prev_id_chain: Completed
handle_following_connection: block_id=xasNtY, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
insert_node: Finished for block_id: xasNtY
insert_node: Starting for block_id: -fQ4LI
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=-fQ4LI, prev_id=None
  No prev_id provided, nothing to handle
handle_prev_id_chain: Completed
handle_following_connection: block_id=-fQ4LI, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
insert_node: Finished for block_id: -fQ4LI
apply_action: Encoding state for doc_id: xxxx
set_root_node_id: Setting root node id to xasNtY
set_root_node_id: Successfully set root node id to xasNtY
set_root_node_id: Finished for doc_id: xxxx
apply_updates: Starting with 3 updates for doc_id: xxxx
apply_updates: Starting with 3 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 2 blocks
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 2 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block -fQ4LI has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
  No next blocks for -fQ4LI
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 2 parents
extract_document_state: Extracted 2 blocks and 2 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "xasNtY": [
flutter:       "-fQ4LI"
flutter:     ],
flutter:     "-fQ4LI": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 2 operations to the editor state
merge_updates: Merging 3 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 4 updates for doc_id: xxxx
apply_updates: Starting with 4 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 2 blocks
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 2 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block -fQ4LI has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
  No next blocks for -fQ4LI
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 2 parents
extract_document_state: Extracted 2 blocks and 2 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: -fQ4LI
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 1 operations
update_node: Updated block_id: -fQ4LI
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 5 updates for doc_id: xxxx
apply_updates: Starting with 5 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 2 blocks
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 2 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block -fQ4LI has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
  No next blocks for -fQ4LI
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 2 parents
extract_document_state: Extracted 2 blocks and 2 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"a\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: -fQ4LI
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: -fQ4LI
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 2 blocks
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 2 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block -fQ4LI has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
  No next blocks for -fQ4LI
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 2 parents
extract_document_state: Extracted 2 blocks and 2 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "xasNtY": [
flutter:       "-fQ4LI"
flutter:     ],
flutter:     "-fQ4LI": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: -fQ4LI
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: -fQ4LI
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 2 blocks
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 2 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block -fQ4LI has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
  No next blocks for -fQ4LI
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 2 parents
extract_document_state: Extracted 2 blocks and 2 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 3 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 2 blocks
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 2 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block -fQ4LI has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
  No next blocks for -fQ4LI
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 2 parents
extract_document_state: Extracted 2 blocks and 2 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
insert_node: Starting for block_id: amRLkN
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=amRLkN, prev_id=Some("-fQ4LI")
  Finding blocks that reference prev_id: -fQ4LI
find_block_referencing_prev_id: Searching for blocks with prev_id = -fQ4LI
  Found 3 total blocks to check
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: amRLkN
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = -fQ4LI: []
  Found 0 blocks with prev_id -fQ4LI: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=amRLkN, next_id=None, prev_id=Some("-fQ4LI")
  Using prev_id strategy (prev_id=-fQ4LI)
find_block_referencing_prev_id: Searching for blocks with prev_id = -fQ4LI
  Found 3 total blocks to check
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: amRLkN
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = -fQ4LI: []
  Found 0 nodes that reference prev_id -fQ4LI: []
  Finished prev_id strategy
  Setting prev_id of block amRLkN to -fQ4LI
insert_node: Finished for block_id: amRLkN
update_node: Updating block_id: -fQ4LI
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
update_node: Updated block_id: -fQ4LI
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Starting with 6 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 3 blocks
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 3 parent nodes

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 3 parents
extract_document_state: Extracted 3 blocks and 3 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: amRLkN
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 1 operations
update_node: Updated block_id: amRLkN
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 3 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 3 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 3 parents
extract_document_state: Extracted 3 blocks and 3 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"b\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "amRLkN": [],
flutter:     "-fQ4LI": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: amRLkN
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: amRLkN
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 3 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 3 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 3 parents
extract_document_state: Extracted 3 blocks and 3 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "amRLkN": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: amRLkN
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: amRLkN
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 3 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 3 parent nodes

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 3 parents
extract_document_state: Extracted 3 blocks and 3 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "amRLkN": [],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 4 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 3 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 3 parent nodes

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 3 parents
extract_document_state: Extracted 3 blocks and 3 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
insert_node: Starting for block_id: N-cZYp
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=N-cZYp, prev_id=Some("amRLkN")
  Finding blocks that reference prev_id: amRLkN
find_block_referencing_prev_id: Searching for blocks with prev_id = amRLkN
  Found 4 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: N-cZYp
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = amRLkN: []
  Found 0 blocks with prev_id amRLkN: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=N-cZYp, next_id=None, prev_id=Some("amRLkN")
  Using prev_id strategy (prev_id=amRLkN)
find_block_referencing_prev_id: Searching for blocks with prev_id = amRLkN
  Found 4 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: N-cZYp
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = amRLkN: []
  Found 0 nodes that reference prev_id amRLkN: []
  Finished prev_id strategy
  Setting prev_id of block N-cZYp to amRLkN
insert_node: Finished for block_id: N-cZYp
update_node: Updating block_id: amRLkN
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
update_node: Updated block_id: amRLkN
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block N-cZYp assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block amRLkN has prev_id -fQ4LI
Block N-cZYp has prev_id amRLkN
Block -fQ4LI has no prev_id
Built prev->next map with 2 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
  - amRLkN has 1 next blocks: ["N-cZYp"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing N-cZYp onto stack
  Adding block N-cZYp to sorted list
  No next blocks for N-cZYp
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "N-cZYp"]

----- Sorting children of parent: N-cZYp -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent N-cZYp: []

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "N-cZYp": {
flutter:       "id": "N-cZYp",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.459369",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "N-cZYp": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "N-cZYp"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
delete_node: Starting for block_id: N-cZYp
remove_block_from_prev_id_chain: Removing block N-cZYp from chain
  Block N-cZYp has prev_id: amRLkN
  Finding blocks that reference N-cZYp as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = N-cZYp
  Found 4 total blocks to check
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: N-cZYp
    Block has prev_id: amRLkN, matches target: false
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = N-cZYp: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
delete_node: Successfully deleted block_id: N-cZYp
insert_node: Starting for block_id: ZWQ6L8
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=ZWQ6L8, prev_id=None
  No prev_id provided, nothing to handle
handle_prev_id_chain: Completed
handle_following_connection: block_id=ZWQ6L8, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
insert_node: Finished for block_id: ZWQ6L8
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "ZWQ6L8": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
merge_updates: Merging 2 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "ZWQ6L8": [],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: ZWQ6L8
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 1 operations
update_node: Updated block_id: ZWQ6L8
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Starting with 7 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"1\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "ZWQ6L8": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: ZWQ6L8
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: ZWQ6L8
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"11\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZWQ6L8": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: ZWQ6L8
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: ZWQ6L8
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZWQ6L8": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "-fQ4LI": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 3 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 4 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 4 parent nodes

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 4 parents
extract_document_state: Extracted 4 blocks and 4 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZWQ6L8": [],
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
insert_node: Starting for block_id: omIMPj
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=omIMPj, prev_id=Some("ZWQ6L8")
  Finding blocks that reference prev_id: ZWQ6L8
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 5 total blocks to check
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: omIMPj
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZWQ6L8: []
  Found 0 blocks with prev_id ZWQ6L8: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=omIMPj, next_id=None, prev_id=Some("ZWQ6L8")
  Using prev_id strategy (prev_id=ZWQ6L8)
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 5 total blocks to check
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: omIMPj
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZWQ6L8: []
  Found 0 nodes that reference prev_id ZWQ6L8: []
  Finished prev_id strategy
  Setting prev_id of block omIMPj to ZWQ6L8
insert_node: Finished for block_id: omIMPj
update_node: Updating block_id: ZWQ6L8
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
update_node: Updated block_id: ZWQ6L8
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: omIMPj -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent omIMPj: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: amRLkN -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block omIMPj assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block ZWQ6L8 has no prev_id
Block omIMPj has prev_id ZWQ6L8
Built prev->next map with 1 entries
  - ZWQ6L8 has 1 next blocks: ["omIMPj"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
    Pushing omIMPj onto stack
  Adding block omIMPj to sorted list
  No next blocks for omIMPj
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8", "omIMPj"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "omIMPj": {
flutter:       "id": "omIMPj",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:38.139979",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": "ZWQ6L8",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "omIMPj": [],
flutter:     "ZWQ6L8": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8",
flutter:       "omIMPj"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent ZWQ6L8: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: omIMPj -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent omIMPj: []

----- Sorting children of parent: amRLkN -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block omIMPj assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block omIMPj has prev_id ZWQ6L8
Block ZWQ6L8 has no prev_id
Built prev->next map with 1 entries
  - ZWQ6L8 has 1 next blocks: ["omIMPj"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
    Pushing omIMPj onto stack
  Adding block omIMPj to sorted list
  No next blocks for omIMPj
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8", "omIMPj"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "omIMPj": {
flutter:       "id": "omIMPj",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:38.139979"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": "ZWQ6L8",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "amRLkN": [
flutter:       "ZWQ6L8",
flutter:       "omIMPj"
flutter:     ],
flutter:     "ZWQ6L8": [],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "omIMPj": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
delete_node: Starting for block_id: omIMPj
remove_block_from_prev_id_chain: Removing block omIMPj from chain
  Block omIMPj has prev_id: ZWQ6L8
  Finding blocks that reference omIMPj as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = omIMPj
  Found 5 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: omIMPj
    Block has prev_id: ZWQ6L8, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = omIMPj: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
delete_node: Successfully deleted block_id: omIMPj
insert_node: Starting for block_id: J9zRrQ
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=J9zRrQ, prev_id=None
  No prev_id provided, nothing to handle
handle_prev_id_chain: Completed
handle_following_connection: block_id=J9zRrQ, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
insert_node: Finished for block_id: J9zRrQ
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Starting with 8 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "J9zRrQ": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Starting with 9 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "J9zRrQ": [],
flutter:     "-fQ4LI": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: J9zRrQ
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 1 operations
update_node: Updated block_id: J9zRrQ
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Starting with 10 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[{\"insert\":\"2\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "J9zRrQ": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "-fQ4LI": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: J9zRrQ
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: J9zRrQ
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Starting with 11 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[{\"insert\":\"22\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "J9zRrQ": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: J9zRrQ
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: J9zRrQ
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "J9zRrQ": [],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 3 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 5 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 5 parent nodes

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 5 parents
extract_document_state: Extracted 5 blocks and 5 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "J9zRrQ": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
insert_node: Starting for block_id: NFn9Rb
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=NFn9Rb, prev_id=Some("J9zRrQ")
  Finding blocks that reference prev_id: J9zRrQ
find_block_referencing_prev_id: Searching for blocks with prev_id = J9zRrQ
  Found 6 total blocks to check
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: NFn9Rb
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
find_block_referencing_prev_id: Found 0 blocks with prev_id = J9zRrQ: []
  Found 0 blocks with prev_id J9zRrQ: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=NFn9Rb, next_id=None, prev_id=Some("J9zRrQ")
  Using prev_id strategy (prev_id=J9zRrQ)
find_block_referencing_prev_id: Searching for blocks with prev_id = J9zRrQ
  Found 6 total blocks to check
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: NFn9Rb
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
find_block_referencing_prev_id: Found 0 blocks with prev_id = J9zRrQ: []
  Found 0 nodes that reference prev_id J9zRrQ: []
  Finished prev_id strategy
  Setting prev_id of block NFn9Rb to J9zRrQ
insert_node: Finished for block_id: NFn9Rb
update_node: Updating block_id: J9zRrQ
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
update_node: Updated block_id: J9zRrQ
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block NFn9Rb assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block J9zRrQ has no prev_id
Block NFn9Rb has prev_id J9zRrQ
Built prev->next map with 1 entries
  - J9zRrQ has 1 next blocks: ["NFn9Rb"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
    Pushing NFn9Rb onto stack
  Adding block NFn9Rb to sorted list
  No next blocks for NFn9Rb
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ", "NFn9Rb"]

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: NFn9Rb -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent NFn9Rb: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "NFn9Rb": {
flutter:       "id": "NFn9Rb",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:48:11.260014",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": "J9zRrQ",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ",
flutter:       "NFn9Rb"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "NFn9Rb": [],
flutter:     "J9zRrQ": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
delete_node: Starting for block_id: NFn9Rb
remove_block_from_prev_id_chain: Removing block NFn9Rb from chain
  Block NFn9Rb has prev_id: J9zRrQ
  Finding blocks that reference NFn9Rb as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = NFn9Rb
  Found 6 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: NFn9Rb
    Block has prev_id: J9zRrQ, matches target: false
  Checking block: ZWQ6L8
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = NFn9Rb: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
delete_node: Successfully deleted block_id: NFn9Rb
insert_node: Starting for block_id: Rd0A4S
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=Rd0A4S, prev_id=Some("ZWQ6L8")
  Finding blocks that reference prev_id: ZWQ6L8
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 6 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: Rd0A4S
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZWQ6L8: []
  Found 0 blocks with prev_id ZWQ6L8: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=Rd0A4S, next_id=None, prev_id=Some("ZWQ6L8")
  Using prev_id strategy (prev_id=ZWQ6L8)
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 6 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: Rd0A4S
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZWQ6L8: []
  Found 0 nodes that reference prev_id ZWQ6L8: []
  Finished prev_id strategy
  Setting prev_id of block Rd0A4S to ZWQ6L8
insert_node: Finished for block_id: Rd0A4S
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: amRLkN -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block Rd0A4S assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block ZWQ6L8 has no prev_id
Block Rd0A4S has prev_id ZWQ6L8
Built prev->next map with 1 entries
  - ZWQ6L8 has 1 next blocks: ["Rd0A4S"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
    Pushing Rd0A4S onto stack
  Adding block Rd0A4S to sorted list
  No next blocks for Rd0A4S
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8", "Rd0A4S"]

----- Sorting children of parent: Rd0A4S -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent Rd0A4S: []

----- Sorting children of parent: xasNtY -----
Parent has 2 children to sort
Mapped 2 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 2 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 1 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
  No next blocks for amRLkN
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "Rd0A4S": {
flutter:       "id": "Rd0A4S",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.619461",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": "ZWQ6L8",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "amRLkN": [
flutter:       "ZWQ6L8",
flutter:       "Rd0A4S"
flutter:     ],
flutter:     "J9zRrQ": [],
flutter:     "Rd0A4S": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "-fQ4LI": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 2 actions for doc_id: xxxx
delete_node: Starting for block_id: Rd0A4S
remove_block_from_prev_id_chain: Removing block Rd0A4S from chain
  Block Rd0A4S has prev_id: ZWQ6L8
  Finding blocks that reference Rd0A4S as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = Rd0A4S
  Found 6 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: Rd0A4S
    Block has prev_id: ZWQ6L8, matches target: false
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = Rd0A4S: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
delete_node: Successfully deleted block_id: Rd0A4S
insert_node: Starting for block_id: FKWGIh
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_to_text: No changes to apply
handle_prev_id_chain: block_id=FKWGIh, prev_id=Some("amRLkN")
  Finding blocks that reference prev_id: amRLkN
find_block_referencing_prev_id: Searching for blocks with prev_id = amRLkN
  Found 6 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: FKWGIh
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = amRLkN: []
  Found 0 blocks with prev_id amRLkN: []
handle_prev_id_chain: Completed
handle_following_connection: block_id=FKWGIh, next_id=None, prev_id=Some("amRLkN")
  Using prev_id strategy (prev_id=amRLkN)
find_block_referencing_prev_id: Searching for blocks with prev_id = amRLkN
  Found 6 total blocks to check
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: FKWGIh
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = amRLkN: []
  Found 0 nodes that reference prev_id amRLkN: []
  Finished prev_id strategy
  Setting prev_id of block FKWGIh to amRLkN
insert_node: Finished for block_id: FKWGIh
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Block FKWGIh has prev_id amRLkN
Built prev->next map with 2 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "FKWGIh": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "J9zRrQ": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Applied 1 operations to the editor state
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: FKWGIh
deltas_to_json: Converting 0 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 1 operations
update_node: Updated block_id: FKWGIh
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Block FKWGIh has prev_id amRLkN
Built prev->next map with 2 entries
  - amRLkN has 1 next blocks: ["FKWGIh"]
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:48:11.834241"
flutter:       },
flutter:       "delta": "[{\"insert\":\"c\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "FKWGIh": [],
flutter:     "-fQ4LI": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "J9zRrQ": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: FKWGIh
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: FKWGIh
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 18 updates for doc_id: xxxx
apply_updates: Starting with 18 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Block FKWGIh has prev_id amRLkN
Built prev->next map with 2 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"cc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "FKWGIh": [],
flutter:     "J9zRrQ": [],
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
update_node: Updating block_id: FKWGIh
deltas_to_json: Converting 1 deltas
apply_delta_to_text: Computing delta diff
apply_delta_to_text: Parsing delta diff from JSON
apply_delta_diff_to_text: Starting with 2 operations
update_node: Updated block_id: FKWGIh
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 19 updates for doc_id: xxxx
apply_updates: Starting with 19 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Block FKWGIh has prev_id amRLkN
Built prev->next map with 2 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "FKWGIh": [],
flutter:     "-fQ4LI": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "J9zRrQ": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 6 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 20 updates for doc_id: xxxx
apply_updates: Starting with 20 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block FKWGIh has prev_id amRLkN
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 2 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: amRLkN -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent amRLkN: ["ZWQ6L8"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "amRLkN",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "amRLkN": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "FKWGIh": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "J9zRrQ": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(151.6, 131.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.8, 126.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.8, 124.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.8, 122.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 120.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 118.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 118.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 116.5)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 115.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 114.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 113.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 113.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 112.8)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 111.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 108.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 107.5)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 107.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 106.8)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 106.5)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 105.7)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 105.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 105.0)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.4, 104.5)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(149.1, 104.2)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(148.9, 103.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(148.6, 103.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(148.6, 102.9)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(148.3, 102.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.8, 102.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.8, 101.4)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.8, 101.1)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.8, 100.6)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.8, 100.3)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.8, 99.8)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: onDragEnd, acceptedPath([1])
flutter: the drag offset is inside the block, dragOffset(Offset(147.8, 99.8)), globalBlockRect(Rect.fromLTRB(120.0, 94.0, 680.0, 208.0))
flutter: Moving node(Node(id: ZWQ6L8, type: paragraph, attributes: {delta: [{insert: 111}], timestamp: 2025-04-24T19:47:10.760863, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [Node(id: J9zRrQ, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:47:40.263079, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [])]), [1, 0]) to path([1])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZWQ6L8 from parent: amRLkN to parent: xasNtY
remove_block_from_prev_id_chain: Removing block ZWQ6L8 from chain
  Finding blocks that reference ZWQ6L8 as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 6 total blocks to check
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: FKWGIh
    Block has prev_id: amRLkN, matches target: false
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZWQ6L8: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZWQ6L8, next_id=Some("amRLkN"), prev_id=Some("-fQ4LI")
  Using prev_id strategy (prev_id=-fQ4LI)
find_block_referencing_prev_id: Searching for blocks with prev_id = -fQ4LI
  Found 6 total blocks to check
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: FKWGIh
    Block has prev_id: amRLkN, matches target: false
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: true
  Checking block: -fQ4LI
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = -fQ4LI: ["amRLkN"]
  Found 1 nodes that reference prev_id -fQ4LI: ["amRLkN"]
  Updating block amRLkN to point to ZWQ6L8
  Finished prev_id strategy
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Starting with 16 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 4 blocks
Block ZWQ6L8 has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Block FKWGIh has prev_id amRLkN
Block amRLkN has prev_id ZWQ6L8
Built prev->next map with 3 entries
  - -fQ4LI has 1 next blocks: ["ZWQ6L8"]
  - ZWQ6L8 has 1 next blocks: ["amRLkN"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing ZWQ6L8 onto stack
  Adding block ZWQ6L8 to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "ZWQ6L8", "amRLkN", "FKWGIh"]

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "ZWQ6L8",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "J9zRrQ": [],
flutter:     "FKWGIh": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "ZWQ6L8",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "amRLkN": [],
flutter:     "-fQ4LI": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Starting with 17 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: xasNtY -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 4 blocks
Block ZWQ6L8 has prev_id -fQ4LI
Block FKWGIh has prev_id amRLkN
Block -fQ4LI has no prev_id
Block amRLkN has prev_id ZWQ6L8
Built prev->next map with 3 entries
  - amRLkN has 1 next blocks: ["FKWGIh"]
  - ZWQ6L8 has 1 next blocks: ["amRLkN"]
  - -fQ4LI has 1 next blocks: ["ZWQ6L8"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing ZWQ6L8 onto stack
  Adding block ZWQ6L8 to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "ZWQ6L8", "amRLkN", "FKWGIh"]

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "ZWQ6L8",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "ZWQ6L8",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "J9zRrQ": [],
flutter:     "amRLkN": [],
flutter:     "FKWGIh": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(152.6, 93.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(154.0, 93.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(154.2, 93.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(157.1, 91.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(158.7, 91.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(159.3, 90.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(160.3, 90.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(160.8, 89.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(161.0, 89.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(161.5, 89.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(162.3, 89.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(162.6, 89.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(162.8, 89.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(163.3, 88.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(163.8, 88.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(164.1, 88.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(164.3, 87.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(164.8, 87.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.3, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(165.6, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.1, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.4, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(166.9, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(167.1, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(168.2, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(169.4, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(169.9, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(170.1, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(170.6, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.0, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(172.8, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(173.3, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(174.0, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(174.3, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(174.8, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(177.0, 87.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(179.9, 85.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(180.2, 84.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(181.2, 84.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(181.5, 84.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(181.7, 83.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.2, 83.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.5, 83.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(182.9, 82.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(183.1, 81.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(183.4, 81.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(183.4, 80.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(183.9, 80.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(183.9, 79.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(183.9, 78.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: the drag offset is inside the block, dragOffset(Offset(183.9, 78.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: onDragEnd, acceptedPath([1])
flutter: the drag offset is inside the block, dragOffset(Offset(183.9, 78.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 94.0))
flutter: Moving node(Node(id: ZWQ6L8, type: paragraph, attributes: {delta: [{insert: 111}], timestamp: 2025-04-24T19:47:10.760863, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [Node(id: J9zRrQ, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:47:40.263079, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [])]), [1]) to path([0])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZWQ6L8 from parent: xasNtY to parent: -fQ4LI
remove_block_from_prev_id_chain: Removing block ZWQ6L8 from chain
  Block ZWQ6L8 has prev_id: -fQ4LI
  Finding blocks that reference ZWQ6L8 as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 6 total blocks to check
  Checking block: FKWGIh
    Block has prev_id: amRLkN, matches target: false
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: ZWQ6L8
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: ZWQ6L8, matches target: true
  Checking block: -fQ4LI
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZWQ6L8: ["amRLkN"]
  Found 1 next blocks: ["amRLkN"]
  Updating next block amRLkN to point to -fQ4LI (was pointing to ZWQ6L8)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZWQ6L8, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Starting with 12 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block FKWGIh has prev_id amRLkN
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 2 entries
  - amRLkN has 1 next blocks: ["FKWGIh"]
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: -fQ4LI -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent -fQ4LI: ["ZWQ6L8"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "-fQ4LI",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "FKWGIh": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "-fQ4LI": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "amRLkN": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "J9zRrQ": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: xasNtY -----
Parent has 3 children to sort
Mapped 3 valid blocks by ID
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 3 blocks
Block FKWGIh has prev_id amRLkN
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Built prev->next map with 2 entries
  - amRLkN has 1 next blocks: ["FKWGIh"]
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: -fQ4LI -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block ZWQ6L8 has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent -fQ4LI: ["ZWQ6L8"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "-fQ4LI",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "-fQ4LI": [
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "J9zRrQ": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "amRLkN": [],
flutter:     "FKWGIh": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(148.6, 90.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.4, 87.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.4, 85.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.4, 83.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.4, 81.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.4, 80.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.4, 79.3)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.1, 78.5)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.1, 77.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.1, 76.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.1, 74.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(147.1, 74.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(146.4, 72.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(146.0, 70.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(146.0, 70.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(146.0, 69.0)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.7, 68.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.5, 68.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.5, 67.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.2, 67.7)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.2, 67.2)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.2, 66.4)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.2, 65.9)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(145.2, 65.6)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(144.7, 65.1)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(144.7, 64.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: onDragEnd, acceptedPath([0])
flutter: the drag offset is inside the block, dragOffset(Offset(144.7, 64.8)), globalBlockRect(Rect.fromLTRB(120.0, 56.0, 680.0, 170.0))
flutter: Moving node(Node(id: ZWQ6L8, type: paragraph, attributes: {delta: [{insert: 111}], timestamp: 2025-04-24T19:47:10.760863, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [Node(id: J9zRrQ, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:47:40.263079, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [])]), [0, 0]) to path([0])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZWQ6L8 from parent: -fQ4LI to parent: xasNtY
remove_block_from_prev_id_chain: Removing block ZWQ6L8 from chain
  Finding blocks that reference ZWQ6L8 as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 6 total blocks to check
  Checking block: xasNtY
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: FKWGIh
    Block has prev_id: amRLkN, matches target: false
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = ZWQ6L8: []
  Found 0 next blocks: []
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZWQ6L8, next_id=Some("-fQ4LI"), prev_id=None
  Using next_id strategy (next_id=-fQ4LI)
  Setting prev_id of next block -fQ4LI to ZWQ6L8
  Attempting to copy device and timestamp from next block -fQ4LI to ZWQ6L8
  WARNING: Next block has no device attribute
  WARNING: Next block has no timestamp attribute
  Finished next_id strategy
handle_following_connection: Completed
move_block: Moved block between parents
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Starting with 13 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: xasNtY -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 4 blocks
Block -fQ4LI has prev_id ZWQ6L8
Block ZWQ6L8 has no prev_id
Block amRLkN has prev_id -fQ4LI
Block FKWGIh has prev_id amRLkN
Built prev->next map with 3 entries
  - amRLkN has 1 next blocks: ["FKWGIh"]
  - ZWQ6L8 has 1 next blocks: ["-fQ4LI"]
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
    Pushing -fQ4LI onto stack
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["ZWQ6L8", "-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "ZWQ6L8",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:46:23.277803"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "amRLkN": [],
flutter:     "FKWGIh": [],
flutter:     "J9zRrQ": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "ZWQ6L8",
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: xasNtY -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 4 blocks
Block amRLkN has prev_id -fQ4LI
Block FKWGIh has prev_id amRLkN
Block ZWQ6L8 has no prev_id
Block -fQ4LI has prev_id ZWQ6L8
Built prev->next map with 3 entries
  - ZWQ6L8 has 1 next blocks: ["-fQ4LI"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["ZWQ6L8"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["ZWQ6L8"]
Starting chain from root: ZWQ6L8
  Adding block ZWQ6L8 to sorted list
    Pushing -fQ4LI onto stack
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
  No next blocks for FKWGIh
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["ZWQ6L8", "-fQ4LI", "amRLkN", "FKWGIh"]

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "ZWQ6L8",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "J9zRrQ": [],
flutter:     "FKWGIh": [],
flutter:     "amRLkN": [],
flutter:     "-fQ4LI": [],
flutter:     "xasNtY": [
flutter:       "ZWQ6L8",
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh"
flutter:     ],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
flutter: onDragStarted
flutter: the drag offset is inside the block, dragOffset(Offset(131.9, 132.6)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(131.9, 136.2)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(131.9, 144.7)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(134.4, 154.5)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(134.4, 156.9)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(135.8, 165.4)), globalBlockRect(Rect.fromLTRB(120.0, 132.0, 680.0, 170.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.4, 172.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(136.4, 176.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(137.0, 179.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(137.7, 181.3)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(137.7, 181.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(137.7, 183.5)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(137.7, 185.7)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.9, 188.1)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(138.9, 191.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(139.5, 195.1)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(139.5, 196.2)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(139.5, 200.9)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(139.5, 202.3)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(139.8, 202.6)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.4, 207.3)), globalBlockRect(Rect.fromLTRB(120.0, 170.0, 680.0, 208.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.4, 213.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.4, 213.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.9, 216.7)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.9, 220.6)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.9, 220.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(140.9, 222.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 225.9)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 227.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 227.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 230.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 230.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 235.6)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 241.6)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 242.7)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 244.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 244.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 245.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(142.5, 245.6)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is not inside the block, dragOffset(Offset(143.0, 246.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 245.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 245.6)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 245.1)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 244.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 244.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 243.5)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 243.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.0, 242.8)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.3, 242.3)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: the drag offset is inside the block, dragOffset(Offset(143.3, 242.0)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: onDragEnd, acceptedPath([4])
flutter: the drag offset is inside the block, dragOffset(Offset(143.3, 242.0)), globalBlockRect(Rect.fromLTRB(120.0, 208.0, 680.0, 246.0))
flutter: Moving node(Node(id: ZWQ6L8, type: paragraph, attributes: {delta: [{insert: 111}], timestamp: 2025-04-24T19:47:10.760863, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [Node(id: J9zRrQ, type: paragraph, attributes: {delta: [{insert: 222}], timestamp: 2025-04-24T19:47:40.263079, device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d}, children: [])]), [0]) to path([3])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxxx
move_block: Moving block_id: ZWQ6L8 from parent: xasNtY to parent: xasNtY
remove_block_from_prev_id_chain: Removing block ZWQ6L8 from chain
  Finding blocks that reference ZWQ6L8 as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = ZWQ6L8
  Found 6 total blocks to check
  Checking block: -fQ4LI
    Block has prev_id: ZWQ6L8, matches target: true
  Checking block: FKWGIh
    Block has prev_id: amRLkN, matches target: false
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 1 blocks with prev_id = ZWQ6L8: ["-fQ4LI"]
  Found 1 next blocks: ["-fQ4LI"]
  Removing prev_id from next block -fQ4LI (was pointing to ZWQ6L8)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=ZWQ6L8, next_id=None, prev_id=Some("FKWGIh")
  Using prev_id strategy (prev_id=FKWGIh)
find_block_referencing_prev_id: Searching for blocks with prev_id = FKWGIh
  Found 6 total blocks to check
  Checking block: -fQ4LI
    Block does not have prev_id
  Checking block: FKWGIh
    Block has prev_id: amRLkN, matches target: false
  Checking block: ZWQ6L8
    Block does not have prev_id
  Checking block: J9zRrQ
    Block does not have prev_id
  Checking block: amRLkN
    Block has prev_id: -fQ4LI, matches target: false
  Checking block: xasNtY
    Block does not have prev_id
find_block_referencing_prev_id: Found 0 blocks with prev_id = FKWGIh: []
  Found 0 nodes that reference prev_id FKWGIh: []
  Finished prev_id strategy
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Starting with 14 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []

----- Sorting children of parent: xasNtY -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 4 blocks
Block -fQ4LI has no prev_id
Block amRLkN has prev_id -fQ4LI
Block ZWQ6L8 has prev_id FKWGIh
Block FKWGIh has prev_id amRLkN
Built prev->next map with 3 entries
  - FKWGIh has 1 next blocks: ["ZWQ6L8"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
  - -fQ4LI has 1 next blocks: ["amRLkN"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
    Pushing ZWQ6L8 onto stack
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh", "ZWQ6L8"]

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:40.263079",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "FKWGIh",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:45:36.277188",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh",
flutter:       "ZWQ6L8"
flutter:     ],
flutter:     "amRLkN": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "FKWGIh": [],
flutter:     "-fQ4LI": [],
flutter:     "J9zRrQ": []
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Starting with 15 updates for doc_id: xxxx
apply_updates: Applying update for doc_id: xxxx
apply_updates: Finished for doc_id: xxxx
apply_updates: Successfully applied updates for doc_id: xxxx
get_document_state: Starting for doc_id: xxxx
extract_document_state: Starting for doc_id: xxxx
extract_document_state: Processing 6 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 6 parent nodes

----- Sorting children of parent: amRLkN -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent amRLkN: []

----- Sorting children of parent: -fQ4LI -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent -fQ4LI: []

----- Sorting children of parent: xasNtY -----
Parent has 4 children to sort
Mapped 4 valid blocks by ID
Block amRLkN assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block -fQ4LI assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block ZWQ6L8 assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Block FKWGIh assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 4 blocks
Block amRLkN has prev_id -fQ4LI
Block -fQ4LI has no prev_id
Block ZWQ6L8 has prev_id FKWGIh
Block FKWGIh has prev_id amRLkN
Built prev->next map with 3 entries
  - -fQ4LI has 1 next blocks: ["amRLkN"]
  - FKWGIh has 1 next blocks: ["ZWQ6L8"]
  - amRLkN has 1 next blocks: ["FKWGIh"]
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["-fQ4LI"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["-fQ4LI"]
Starting chain from root: -fQ4LI
  Adding block -fQ4LI to sorted list
    Pushing amRLkN onto stack
  Adding block amRLkN to sorted list
    Pushing FKWGIh onto stack
  Adding block FKWGIh to sorted list
    Pushing ZWQ6L8 onto stack
  Adding block ZWQ6L8 to sorted list
  No next blocks for ZWQ6L8
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent xasNtY: ["-fQ4LI", "amRLkN", "FKWGIh", "ZWQ6L8"]

----- Sorting children of parent: ZWQ6L8 -----
Parent has 1 children to sort
Mapped 1 valid blocks by ID
Block J9zRrQ assigned to device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Grouped blocks into 1 devices
  - Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 blocks
Block J9zRrQ has no prev_id
Built prev->next map with 0 entries
Device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d has 1 root blocks: ["J9zRrQ"]
Processing devices in order: ["3a777bdb-5130-48f9-8c9c-f8a41ee3615d"]

Processing device: 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
Sorted roots for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d: ["J9zRrQ"]
Starting chain from root: J9zRrQ
  Adding block J9zRrQ to sorted list
  No next blocks for J9zRrQ
No remaining blocks for device 3a777bdb-5130-48f9-8c9c-f8a41ee3615d
No globally remaining blocks
Final sorted order for parent ZWQ6L8: ["J9zRrQ"]

----- Sorting children of parent: J9zRrQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent J9zRrQ: []

----- Sorting children of parent: FKWGIh -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent FKWGIh: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 6 parents
extract_document_state: Extracted 6 blocks and 6 parent-child relationships
get_document_state: Finished for doc_id: xxxx
flutter: {
flutter:   "docId": "xxxx",
flutter:   "blocks": {
flutter:     "ZWQ6L8": {
flutter:       "id": "ZWQ6L8",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:10.760863"
flutter:       },
flutter:       "delta": "[{\"insert\":\"111\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "FKWGIh",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "xasNtY": {
flutter:       "id": "xasNtY",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277188"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "FKWGIh": {
flutter:       "id": "FKWGIh",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:48:11.834241",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"ccc\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "amRLkN",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "J9zRrQ": {
flutter:       "id": "J9zRrQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-04-24T19:47:40.263079"
flutter:       },
flutter:       "delta": "[{\"insert\":\"222\"}]",
flutter:       "parentId": "ZWQ6L8",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "-fQ4LI": {
flutter:       "id": "-fQ4LI",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d",
flutter:         "timestamp": "2025-04-24T19:45:36.277282",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"aaa\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "amRLkN": {
flutter:       "id": "amRLkN",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-04-24T19:46:23.277803",
flutter:         "delta": "[]",
flutter:         "device": "3a777bdb-5130-48f9-8c9c-f8a41ee3615d"
flutter:       },
flutter:       "delta": "[{\"insert\":\"bbb\"}]",
flutter:       "parentId": "xasNtY",
flutter:       "prevId": "-fQ4LI",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "amRLkN": [],
flutter:     "FKWGIh": [],
flutter:     "ZWQ6L8": [
flutter:       "J9zRrQ"
flutter:     ],
flutter:     "-fQ4LI": [],
flutter:     "J9zRrQ": [],
flutter:     "xasNtY": [
flutter:       "-fQ4LI",
flutter:       "amRLkN",
flutter:       "FKWGIh",
flutter:       "ZWQ6L8"
flutter:     ]
flutter:   },
flutter:   "rootId": "xasNtY"
flutter: }
