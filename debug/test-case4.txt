flutter: Moving node(Node(id: 3Z41Cs, type: heading, attributes: {device: bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79, delta: [{insert: Here}], level: 1, timestamp: 2025-03-26T13:05:58.979981}, children: []), [0]) to path([10])
flutter: Transaction done
apply_action: Starting with 1 actions for doc_id: xxx
move_block: Moving block_id: 3Z41Cs from parent: qqi_hW to parent: qqi_hW
remove_block_from_prev_id_chain: Removing block 3Z41Cs from chain
  Finding blocks that reference 3Z41Cs as their prev_id
find_block_referencing_prev_id: Searching for blocks with prev_id = 3Z41Cs
  Found 12 total blocks to check
  Checking block: DpaQNz
    Block has prev_id: QZg5hQ, matches target: false
  Checking block: s4G6zw
    Block has prev_id: DpaQNz, matches target: false
  Checking block: bXY0mr
    Block has prev_id: 10FIbm, matches target: false
  Checking block: VYlaMd
    Block has prev_id: DbA7yH, matches target: false
  Checking block: E0I6nz
    Block has prev_id: PTZoKi, matches target: false
  Checking block: mHZ7ii
    Block has prev_id: E0I6nz, matches target: false
  Checking block: 3Z41Cs
    Block does not have prev_id
  Checking block: QZg5hQ
    Block has prev_id: 3Z41Cs, matches target: true
  Checking block: DbA7yH
    Block has prev_id: s4G6zw, matches target: false
  Checking block: qqi_hW
    Block does not have prev_id
  Checking block: PTZoKi
    Block has prev_id: bXY0mr, matches target: false
  Checking block: 10FIbm
    Block has prev_id: VYlaMd, matches target: false
find_block_referencing_prev_id: Found 1 blocks with prev_id = 3Z41Cs: ["QZg5hQ"]
  Found 1 next blocks: ["QZg5hQ"]
  Removing prev_id from next block QZg5hQ (was pointing to 3Z41Cs)
remove_block_from_prev_id_chain: Completed
handle_following_connection: block_id=3Z41Cs, next_id=None, prev_id=None
  No prev_id or next_id provided, nothing to handle
handle_following_connection: Completed
move_block: Moved block within same parent
apply_action: Encoding state for doc_id: xxx
apply_updates: Starting with 75 updates for doc_id: xxx
apply_updates: Starting with 75 updates for doc_id: xxx
apply_updates: Applying update for doc_id: xxx
apply_updates: Finished for doc_id: xxx
apply_updates: Successfully applied updates for doc_id: xxx
get_document_state: Starting for doc_id: xxx
extract_document_state: Starting for doc_id: xxx
extract_document_state: Processing 12 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 12 parent nodes

----- Sorting children of parent: DpaQNz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DpaQNz: []

----- Sorting children of parent: mHZ7ii -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent mHZ7ii: []

----- Sorting children of parent: DbA7yH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DbA7yH: []

----- Sorting children of parent: E0I6nz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent E0I6nz: []

----- Sorting children of parent: qqi_hW -----
Parent has 11 children to sort
Mapped 11 valid blocks by ID
Block bXY0mr assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block PTZoKi assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block s4G6zw assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block QZg5hQ assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block mHZ7ii assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block 3Z41Cs assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block 10FIbm assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block E0I6nz assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block DpaQNz assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block VYlaMd assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block DbA7yH assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Grouped blocks into 3 devices
  - Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has 6 blocks
  - Device aaa770e7-3141-458d-a787-bacf43ac1a1f has 2 blocks
  - Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 3 blocks
Block bXY0mr has prev_id 10FIbm
Block PTZoKi has prev_id bXY0mr
Block s4G6zw has prev_id DpaQNz
Block QZg5hQ has no prev_id
Block mHZ7ii has prev_id E0I6nz
Block 3Z41Cs has no prev_id
Block 10FIbm has prev_id VYlaMd
Block E0I6nz has prev_id PTZoKi
Block DpaQNz has prev_id QZg5hQ
Block VYlaMd has prev_id DbA7yH
Block DbA7yH has prev_id s4G6zw
Built prev->next map with 9 entries
  - 10FIbm has 1 next blocks: ["bXY0mr"]
  - QZg5hQ has 1 next blocks: ["DpaQNz"]
  - E0I6nz has 1 next blocks: ["mHZ7ii"]
  - DbA7yH has 1 next blocks: ["VYlaMd"]
  - DpaQNz has 1 next blocks: ["s4G6zw"]
  - PTZoKi has 1 next blocks: ["E0I6nz"]
  - bXY0mr has 1 next blocks: ["PTZoKi"]
  - s4G6zw has 1 next blocks: ["DbA7yH"]
  - VYlaMd has 1 next blocks: ["10FIbm"]
Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has no root blocks
Device aaa770e7-3141-458d-a787-bacf43ac1a1f has no root blocks
Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 2 root blocks: ["QZg5hQ", "3Z41Cs"]
Processing devices in order: ["8e75fdcd-52ee-4972-8175-e5140fe14fe7", "aaa770e7-3141-458d-a787-bacf43ac1a1f", "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79"]

Processing device: 8e75fdcd-52ee-4972-8175-e5140fe14fe7
No roots for device 8e75fdcd-52ee-4972-8175-e5140fe14fe7, skipping

Processing device: aaa770e7-3141-458d-a787-bacf43ac1a1f
No roots for device aaa770e7-3141-458d-a787-bacf43ac1a1f, skipping

Processing device: bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Comparing root blocks: 3Z41Cs (time: 2025-03-26T13:05:58.979981) vs QZg5hQ (time: 2025-03-26T13:06:00.601337)
Sorted roots for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79: ["3Z41Cs", "QZg5hQ"]
Starting chain from root: 3Z41Cs
  Adding block 3Z41Cs to sorted list
  No next blocks for 3Z41Cs
Starting chain from root: QZg5hQ
  Adding block QZg5hQ to sorted list
    Pushing DpaQNz onto stack
  Adding block DpaQNz to sorted list
    Pushing s4G6zw onto stack
  Adding block s4G6zw to sorted list
    Pushing DbA7yH onto stack
  Adding block DbA7yH to sorted list
    Pushing VYlaMd onto stack
  Adding block VYlaMd to sorted list
    Pushing 10FIbm onto stack
  Adding block 10FIbm to sorted list
    Pushing bXY0mr onto stack
  Adding block bXY0mr to sorted list
    Pushing PTZoKi onto stack
  Adding block PTZoKi to sorted list
    Pushing E0I6nz onto stack
  Adding block E0I6nz to sorted list
    Pushing mHZ7ii onto stack
  Adding block mHZ7ii to sorted list
  No next blocks for mHZ7ii
No remaining blocks for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
No globally remaining blocks
Final sorted order for parent qqi_hW: ["3Z41Cs", "QZg5hQ", "DpaQNz", "s4G6zw", "DbA7yH", "VYlaMd", "10FIbm", "bXY0mr", "PTZoKi", "E0I6nz", "mHZ7ii"]

----- Sorting children of parent: s4G6zw -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent s4G6zw: []

----- Sorting children of parent: QZg5hQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent QZg5hQ: []

----- Sorting children of parent: bXY0mr -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent bXY0mr: []

----- Sorting children of parent: 10FIbm -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 10FIbm: []

----- Sorting children of parent: VYlaMd -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent VYlaMd: []

----- Sorting children of parent: 3Z41Cs -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 3Z41Cs: []

----- Sorting children of parent: PTZoKi -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent PTZoKi: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 12 parents
extract_document_state: Extracted 12 blocks and 12 parent-child relationships
get_document_state: Finished for doc_id: xxx
flutter: {
flutter:   "docId": "xxx",
flutter:   "blocks": {
flutter:     "10FIbm": {
flutter:       "id": "10FIbm",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-03-26T13:16:05.131149",
flutter:         "device": "8e75fdcd-52ee-4972-8175-e5140fe14fe7"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "VYlaMd",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "DbA7yH": {
flutter:       "id": "DbA7yH",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "aaa770e7-3141-458d-a787-bacf43ac1a1f",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-03-26T12:49:24.069775"
flutter:       },
flutter:       "delta": "[{\"insert\":\"sub title\"}]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "s4G6zw",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "DpaQNz": {
flutter:       "id": "DpaQNz",
flutter:       "ty": "heading",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-03-26T12:49:17.265980",
flutter:         "device": "aaa770e7-3141-458d-a787-bacf43ac1a1f",
flutter:         "level": "1"
flutter:       },
flutter:       "delta": "[{\"insert\":\"New way of handling\"}]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "QZg5hQ",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "E0I6nz": {
flutter:       "id": "E0I6nz",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "8e75fdcd-52ee-4972-8175-e5140fe14fe7",
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-03-26T13:16:05.610237"
flutter:       },
flutter:       "delta": "[{\"insert\":\"arstinarsnet\"}]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "PTZoKi",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "bXY0mr": {
flutter:       "id": "bXY0mr",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "8e75fdcd-52ee-4972-8175-e5140fe14fe7",
flutter:         "timestamp": "2025-03-26T13:16:05.296300",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "10FIbm",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "VYlaMd": {
flutter:       "id": "VYlaMd",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "timestamp": "2025-03-26T13:16:04.968403",
flutter:         "delta": "[]",
flutter:         "device": "8e75fdcd-52ee-4972-8175-e5140fe14fe7"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "DbA7yH",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "QZg5hQ": {
flutter:       "id": "QZg5hQ",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "device": "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79",
flutter:         "timestamp": "2025-03-26T13:06:00.601337",
flutter:         "delta": "[]"
flutter:       },
flutter:       "delta": "[{\"insert\":\"Ahoj\"}]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "qqi_hW": {
flutter:       "id": "qqi_hW",
flutter:       "ty": "page",
flutter:       "attributes": {
flutter:         "timestamp": "2025-03-26T12:49:15.158436",
flutter:         "device": "aaa770e7-3141-458d-a787-bacf43ac1a1f"
flutter:       },
flutter:       "delta": null,
flutter:       "parentId": null,
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "mHZ7ii": {
flutter:       "id": "mHZ7ii",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-03-26T13:16:07.154612",
flutter:         "device": "8e75fdcd-52ee-4972-8175-e5140fe14fe7"
flutter:       },
flutter:       "delta": "[{\"insert\":\"]arst\"}]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "E0I6nz",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "PTZoKi": {
flutter:       "id": "PTZoKi",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "timestamp": "2025-03-26T13:16:05.464318",
flutter:         "device": "8e75fdcd-52ee-4972-8175-e5140fe14fe7"
flutter:       },
flutter:       "delta": "[]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "bXY0mr",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "s4G6zw": {
flutter:       "id": "s4G6zw",
flutter:       "ty": "paragraph",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "device": "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79",
flutter:         "timestamp": "2025-03-26T13:06:02.030042"
flutter:       },
flutter:       "delta": "[{\"insert\":\"Tomi\"}]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": "DpaQNz",
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     },
flutter:     "3Z41Cs": {
flutter:       "id": "3Z41Cs",
flutter:       "ty": "heading",
flutter:       "attributes": {
flutter:         "delta": "[]",
flutter:         "level": "1",
flutter:         "device": "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79",
flutter:         "timestamp": "2025-03-26T13:05:58.979981"
flutter:       },
flutter:       "delta": "[{\"insert\":\"Here\"}]",
flutter:       "parentId": "qqi_hW",
flutter:       "prevId": null,
flutter:       "nextId": null,
flutter:       "oldParentId": null
flutter:     }
flutter:   },
flutter:   "childrenMap": {
flutter:     "DpaQNz": [],
flutter:     "mHZ7ii": [],
flutter:     "QZg5hQ": [],
flutter:     "qqi_hW": [
flutter:       "3Z41Cs",
flutter:       "QZg5hQ",
flutter:       "DpaQNz",
flutter:       "s4G6zw",
flutter:       "DbA7yH",
flutter:       "VYlaMd",
flutter:       "10FIbm",
flutter:       "bXY0mr",
flutter:       "PTZoKi",
flutter:       "E0I6nz",
flutter:       "mHZ7ii"
flutter:     ],
flutter:     "10FIbm": [],
flutter:     "E0I6nz": [],
flutter:     "bXY0mr": [],
flutter:     "DbA7yH": [],
flutter:     "3Z41Cs": [],
flutter:     "PTZoKi": [],
flutter:     "s4G6zw": [],
flutter:     "VYlaMd": []
flutter:   },
flutter:   "rootId": "qqi_hW"
flutter: }
merge_updates: Merging 1 updates
merge_updates: Successfully merged updates
apply_updates: Starting with 76 updates for doc_id: xxx
apply_updates: Starting with 76 updates for doc_id: xxx
apply_updates: Applying update for doc_id: xxx
apply_updates: Finished for doc_id: xxx
apply_updates: Successfully applied updates for doc_id: xxx
get_document_state: Starting for doc_id: xxx
extract_document_state: Starting for doc_id: xxx
extract_document_state: Processing 12 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 12 parent nodes

----- Sorting children of parent: E0I6nz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent E0I6nz: []

----- Sorting children of parent: VYlaMd -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent VYlaMd: []

----- Sorting children of parent: DbA7yH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DbA7yH: []

----- Sorting children of parent: mHZ7ii -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent mHZ7ii: []

----- Sorting children of parent: qqi_hW -----
Parent has 11 children to sort
Mapped 11 valid blocks by ID
Block PTZoKi assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block DpaQNz assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block QZg5hQ assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block DbA7yH assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block VYlaMd assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block mHZ7ii assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block s4G6zw assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block 3Z41Cs assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block bXY0mr assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block 10FIbm assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block E0I6nz assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Grouped blocks into 3 devices
  - Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 3 blocks
  - Device aaa770e7-3141-458d-a787-bacf43ac1a1f has 2 blocks
  - Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has 6 blocks
Block PTZoKi has prev_id bXY0mr
Block DpaQNz has prev_id QZg5hQ
Block QZg5hQ has no prev_id
Block DbA7yH has prev_id s4G6zw
Block VYlaMd has prev_id DbA7yH
Block mHZ7ii has prev_id E0I6nz
Block s4G6zw has prev_id DpaQNz
Block 3Z41Cs has no prev_id
Block bXY0mr has prev_id 10FIbm
Block 10FIbm has prev_id VYlaMd
Block E0I6nz has prev_id PTZoKi
Built prev->next map with 9 entries
  - QZg5hQ has 1 next blocks: ["DpaQNz"]
  - s4G6zw has 1 next blocks: ["DbA7yH"]
  - DbA7yH has 1 next blocks: ["VYlaMd"]
  - bXY0mr has 1 next blocks: ["PTZoKi"]
  - 10FIbm has 1 next blocks: ["bXY0mr"]
  - VYlaMd has 1 next blocks: ["10FIbm"]
  - E0I6nz has 1 next blocks: ["mHZ7ii"]
  - DpaQNz has 1 next blocks: ["s4G6zw"]
  - PTZoKi has 1 next blocks: ["E0I6nz"]
Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 2 root blocks: ["QZg5hQ", "3Z41Cs"]
Device aaa770e7-3141-458d-a787-bacf43ac1a1f has no root blocks
Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has no root blocks
Processing devices in order: ["8e75fdcd-52ee-4972-8175-e5140fe14fe7", "aaa770e7-3141-458d-a787-bacf43ac1a1f", "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79"]

Processing device: 8e75fdcd-52ee-4972-8175-e5140fe14fe7
No roots for device 8e75fdcd-52ee-4972-8175-e5140fe14fe7, skipping

Processing device: aaa770e7-3141-458d-a787-bacf43ac1a1f
No roots for device aaa770e7-3141-458d-a787-bacf43ac1a1f, skipping

Processing device: bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Comparing root blocks: 3Z41Cs (time: 2025-03-26T13:05:58.979981) vs QZg5hQ (time: 2025-03-26T13:06:00.601337)
Sorted roots for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79: ["3Z41Cs", "QZg5hQ"]
Starting chain from root: 3Z41Cs
  Adding block 3Z41Cs to sorted list
  No next blocks for 3Z41Cs
Starting chain from root: QZg5hQ
  Adding block QZg5hQ to sorted list
    Pushing DpaQNz onto stack
  Adding block DpaQNz to sorted list
    Pushing s4G6zw onto stack
  Adding block s4G6zw to sorted list
    Pushing DbA7yH onto stack
  Adding block DbA7yH to sorted list
    Pushing VYlaMd onto stack
  Adding block VYlaMd to sorted list
    Pushing 10FIbm onto stack
  Adding block 10FIbm to sorted list
    Pushing bXY0mr onto stack
  Adding block bXY0mr to sorted list
    Pushing PTZoKi onto stack
  Adding block PTZoKi to sorted list
    Pushing E0I6nz onto stack
  Adding block E0I6nz to sorted list
    Pushing mHZ7ii onto stack
  Adding block mHZ7ii to sorted list
  No next blocks for mHZ7ii
No remaining blocks for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
No globally remaining blocks
Final sorted order for parent qqi_hW: ["3Z41Cs", "QZg5hQ", "DpaQNz", "s4G6zw", "DbA7yH", "VYlaMd", "10FIbm", "bXY0mr", "PTZoKi", "E0I6nz", "mHZ7ii"]

----- Sorting children of parent: s4G6zw -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent s4G6zw: []

----- Sorting children of parent: 10FIbm -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 10FIbm: []

----- Sorting children of parent: QZg5hQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent QZg5hQ: []

----- Sorting children of parent: 3Z41Cs -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 3Z41Cs: []

----- Sorting children of parent: bXY0mr -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent bXY0mr: []

----- Sorting children of parent: DpaQNz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DpaQNz: []

----- Sorting children of parent: PTZoKi -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent PTZoKi: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 12 parents
extract_document_state: Extracted 12 blocks and 12 parent-child relationships
get_document_state: Finished for doc_id: xxx
apply_updates: Starting with 63 updates for doc_id: xxx
apply_updates: Starting with 63 updates for doc_id: xxx
[ERROR:flutter/runtime/dart_vm_initializer.cc(40)] Unhandled Exception: Bad state: Cannot add new events after calling close
#0      _BroadcastStreamController.add (dart:async/broadcast_stream_controller.dart:256:24)
#1      Subject._add (package:rxdart/src/subjects/subject.dart:151:17)
#2      Subject.add (package:rxdart/src/subjects/subject.dart:141:5)
#3      _RootZone.runUnaryGuarded (dart:async/zone.dart:1778:10)
#4      _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:381:11)
#5      _BufferingStreamSubscription._add (dart:async/stream_impl.dart:312:7)
#6      _SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:798:19)
#7      _StreamController._add (dart:async/stream_controller.dart:663:7)
#8      _StreamController.add (dart:async/stream_controller.dart:618:5)
#9      CombineLatestStream._buildController.<anonymous closure>.<anonymous closure>.<anonymous closure> (package:rxdart/src/streams/combine_latest.dart:330:26)
#10     _RootZone.runUnaryGuarded (dart:async/zone.dart:1778:10)
#11     _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:381:11)
#12     _BufferingStreamSubscription._add (dart:async/stream_impl.dart:312:7)
#13     _SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:798:19)
#14     _StreamController._add (dart:async/stream_controller.dart:663:7)
#15     _StreamController.add (dart:async/stream_controller.dart:618:5)
#16     _AsyncStarStreamController.add (dart:async-patch/async_patch.dart:80:16)
#17     DocP.build.<anonymous closure> (package:my_wear_app/presenation/module/pages/doc_page/module.dart)
<asynchronous suspension>
#18     _StreamController.addError (dart:async/stream_controller.dart:622:3)
<asynchronous suspension>
#19     Subject.add (package:rxdart/src/subjects/subject.dart:134:3)
<asynchronous suspension>

apply_updates: Applying update for doc_id: xxx
apply_updates: Finished for doc_id: xxx
apply_updates: Successfully applied updates for doc_id: xxx
get_document_state: Starting for doc_id: xxx
extract_document_state: Starting for doc_id: xxx
extract_document_state: Processing 12 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 12 parent nodes

----- Sorting children of parent: VYlaMd -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent VYlaMd: []

----- Sorting children of parent: 10FIbm -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 10FIbm: []

----- Sorting children of parent: mHZ7ii -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent mHZ7ii: []

----- Sorting children of parent: QZg5hQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent QZg5hQ: []

----- Sorting children of parent: DbA7yH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DbA7yH: []

----- Sorting children of parent: qqi_hW -----
Parent has 11 children to sort
Mapped 11 valid blocks by ID
Block VYlaMd assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block DpaQNz assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block DbA7yH assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block s4G6zw assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block bXY0mr assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block QZg5hQ assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block PTZoKi assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block E0I6nz assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block 3Z41Cs assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block 10FIbm assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block mHZ7ii assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Grouped blocks into 3 devices
  - Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 3 blocks
  - Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has 6 blocks
  - Device aaa770e7-3141-458d-a787-bacf43ac1a1f has 2 blocks
Block VYlaMd has prev_id DbA7yH
Block DpaQNz has prev_id QZg5hQ
Block DbA7yH has prev_id s4G6zw
Block s4G6zw has prev_id DpaQNz
Block bXY0mr has prev_id 10FIbm
Block QZg5hQ has no prev_id
Block PTZoKi has prev_id bXY0mr
Block E0I6nz has prev_id PTZoKi
Block 3Z41Cs has no prev_id
Block 10FIbm has prev_id VYlaMd
Block mHZ7ii has prev_id E0I6nz
Built prev->next map with 9 entries
  - DpaQNz has 1 next blocks: ["s4G6zw"]
  - PTZoKi has 1 next blocks: ["E0I6nz"]
  - E0I6nz has 1 next blocks: ["mHZ7ii"]
  - s4G6zw has 1 next blocks: ["DbA7yH"]
  - 10FIbm has 1 next blocks: ["bXY0mr"]
  - VYlaMd has 1 next blocks: ["10FIbm"]
  - DbA7yH has 1 next blocks: ["VYlaMd"]
  - bXY0mr has 1 next blocks: ["PTZoKi"]
  - QZg5hQ has 1 next blocks: ["DpaQNz"]
Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 2 root blocks: ["QZg5hQ", "3Z41Cs"]
Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has no root blocks
Device aaa770e7-3141-458d-a787-bacf43ac1a1f has no root blocks
Processing devices in order: ["8e75fdcd-52ee-4972-8175-e5140fe14fe7", "aaa770e7-3141-458d-a787-bacf43ac1a1f", "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79"]

Processing device: 8e75fdcd-52ee-4972-8175-e5140fe14fe7
No roots for device 8e75fdcd-52ee-4972-8175-e5140fe14fe7, skipping

Processing device: aaa770e7-3141-458d-a787-bacf43ac1a1f
No roots for device aaa770e7-3141-458d-a787-bacf43ac1a1f, skipping

Processing device: bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Comparing root blocks: 3Z41Cs (time: 2025-03-26T13:05:58.979981) vs QZg5hQ (time: 2025-03-26T13:06:00.601337)
Sorted roots for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79: ["3Z41Cs", "QZg5hQ"]
Starting chain from root: 3Z41Cs
  Adding block 3Z41Cs to sorted list
  No next blocks for 3Z41Cs
Starting chain from root: QZg5hQ
  Adding block QZg5hQ to sorted list
    Pushing DpaQNz onto stack
  Adding block DpaQNz to sorted list
    Pushing s4G6zw onto stack
  Adding block s4G6zw to sorted list
    Pushing DbA7yH onto stack
  Adding block DbA7yH to sorted list
    Pushing VYlaMd onto stack
  Adding block VYlaMd to sorted list
    Pushing 10FIbm onto stack
  Adding block 10FIbm to sorted list
    Pushing bXY0mr onto stack
  Adding block bXY0mr to sorted list
    Pushing PTZoKi onto stack
  Adding block PTZoKi to sorted list
    Pushing E0I6nz onto stack
  Adding block E0I6nz to sorted list
    Pushing mHZ7ii onto stack
  Adding block mHZ7ii to sorted list
  No next blocks for mHZ7ii
No remaining blocks for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
No globally remaining blocks
Final sorted order for parent qqi_hW: ["3Z41Cs", "QZg5hQ", "DpaQNz", "s4G6zw", "DbA7yH", "VYlaMd", "10FIbm", "bXY0mr", "PTZoKi", "E0I6nz", "mHZ7ii"]

----- Sorting children of parent: E0I6nz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent E0I6nz: []

----- Sorting children of parent: DpaQNz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DpaQNz: []

----- Sorting children of parent: PTZoKi -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent PTZoKi: []

----- Sorting children of parent: s4G6zw -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent s4G6zw: []

----- Sorting children of parent: 3Z41Cs -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 3Z41Cs: []

----- Sorting children of parent: bXY0mr -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent bXY0mr: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 12 parents
extract_document_state: Extracted 12 blocks and 12 parent-child relationships
get_document_state: Finished for doc_id: xxx
apply_updates: Starting with 64 updates for doc_id: xxx
apply_updates: Starting with 64 updates for doc_id: xxx
apply_updates: Applying update for doc_id: xxx
apply_updates: Finished for doc_id: xxx
apply_updates: Successfully applied updates for doc_id: xxx
get_document_state: Starting for doc_id: xxx
extract_document_state: Starting for doc_id: xxx
extract_document_state: Processing 12 blocks
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 0 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 12 parent nodes

----- Sorting children of parent: E0I6nz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent E0I6nz: []

----- Sorting children of parent: bXY0mr -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent bXY0mr: []

----- Sorting children of parent: PTZoKi -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent PTZoKi: []

----- Sorting children of parent: s4G6zw -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent s4G6zw: []

----- Sorting children of parent: 3Z41Cs -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 3Z41Cs: []

----- Sorting children of parent: QZg5hQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent QZg5hQ: []

----- Sorting children of parent: 10FIbm -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 10FIbm: []

----- Sorting children of parent: VYlaMd -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent VYlaMd: []

----- Sorting children of parent: DpaQNz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DpaQNz: []

----- Sorting children of parent: mHZ7ii -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent mHZ7ii: []

----- Sorting children of parent: qqi_hW -----
Parent has 11 children to sort
Mapped 11 valid blocks by ID
Block E0I6nz assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block VYlaMd assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block 10FIbm assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block QZg5hQ assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block PTZoKi assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block DbA7yH assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block 3Z41Cs assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block bXY0mr assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block mHZ7ii assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block s4G6zw assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block DpaQNz assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Grouped blocks into 3 devices
  - Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has 6 blocks
  - Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 3 blocks
  - Device aaa770e7-3141-458d-a787-bacf43ac1a1f has 2 blocks
Block E0I6nz has prev_id PTZoKi
Block VYlaMd has prev_id DbA7yH
Block 10FIbm has prev_id VYlaMd
Block QZg5hQ has no prev_id
Block PTZoKi has prev_id bXY0mr
Block DbA7yH has prev_id s4G6zw
Block 3Z41Cs has no prev_id
Block bXY0mr has prev_id 10FIbm
Block mHZ7ii has prev_id E0I6nz
Block s4G6zw has prev_id DpaQNz
Block DpaQNz has prev_id QZg5hQ
Built prev->next map with 9 entries
  - PTZoKi has 1 next blocks: ["E0I6nz"]
  - bXY0mr has 1 next blocks: ["PTZoKi"]
  - DpaQNz has 1 next blocks: ["s4G6zw"]
  - E0I6nz has 1 next blocks: ["mHZ7ii"]
  - 10FIbm has 1 next blocks: ["bXY0mr"]
  - VYlaMd has 1 next blocks: ["10FIbm"]
  - s4G6zw has 1 next blocks: ["DbA7yH"]
  - DbA7yH has 1 next blocks: ["VYlaMd"]
  - QZg5hQ has 1 next blocks: ["DpaQNz"]
Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has no root blocks
Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 2 root blocks: ["QZg5hQ", "3Z41Cs"]
Device aaa770e7-3141-458d-a787-bacf43ac1a1f has no root blocks
Processing devices in order: ["8e75fdcd-52ee-4972-8175-e5140fe14fe7", "aaa770e7-3141-458d-a787-bacf43ac1a1f", "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79"]

Processing device: 8e75fdcd-52ee-4972-8175-e5140fe14fe7
No roots for device 8e75fdcd-52ee-4972-8175-e5140fe14fe7, skipping

Processing device: aaa770e7-3141-458d-a787-bacf43ac1a1f
No roots for device aaa770e7-3141-458d-a787-bacf43ac1a1f, skipping

Processing device: bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Comparing root blocks: 3Z41Cs (time: 2025-03-26T13:05:58.979981) vs QZg5hQ (time: 2025-03-26T13:06:00.601337)
Sorted roots for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79: ["3Z41Cs", "QZg5hQ"]
Starting chain from root: 3Z41Cs
  Adding block 3Z41Cs to sorted list
  No next blocks for 3Z41Cs
Starting chain from root: QZg5hQ
  Adding block QZg5hQ to sorted list
    Pushing DpaQNz onto stack
  Adding block DpaQNz to sorted list
    Pushing s4G6zw onto stack
  Adding block s4G6zw to sorted list
    Pushing DbA7yH onto stack
  Adding block DbA7yH to sorted list
    Pushing VYlaMd onto stack
  Adding block VYlaMd to sorted list
    Pushing 10FIbm onto stack
  Adding block 10FIbm to sorted list
    Pushing bXY0mr onto stack
  Adding block bXY0mr to sorted list
    Pushing PTZoKi onto stack
  Adding block PTZoKi to sorted list
    Pushing E0I6nz onto stack
  Adding block E0I6nz to sorted list
    Pushing mHZ7ii onto stack
  Adding block mHZ7ii to sorted list
  No next blocks for mHZ7ii
No remaining blocks for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
No globally remaining blocks
Final sorted order for parent qqi_hW: ["3Z41Cs", "QZg5hQ", "DpaQNz", "s4G6zw", "DbA7yH", "VYlaMd", "10FIbm", "bXY0mr", "PTZoKi", "E0I6nz", "mHZ7ii"]

----- Sorting children of parent: DbA7yH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DbA7yH: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 12 parents
extract_document_state: Extracted 12 blocks and 12 parent-child relationships
get_document_state: Finished for doc_id: xxx
[ERROR:flutter/runtime/dart_vm_initializer.cc(40)] Unhandled Exception: Bad state: Cannot add new events after calling close
#0      _BroadcastStreamController.add (dart:async/broadcast_stream_controller.dart:256:24)
#1      Subject._add (package:rxdart/src/subjects/subject.dart:151:17)
#2      Subject.add (package:rxdart/src/subjects/subject.dart:141:5)
#3      _RootZone.runUnaryGuarded (dart:async/zone.dart:1778:10)
#4      _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:381:11)
#5      _BufferingStreamSubscription._add (dart:async/stream_impl.dart:312:7)
#6      _SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:798:19)
#7      _StreamController._add (dart:async/stream_controller.dart:663:7)
#8      _StreamController.add (dart:async/stream_controller.dart:618:5)
#9      CombineLatestStream._buildController.<anonymous closure>.<anonymous closure>.<anonymous closure> (package:rxdart/src/streams/combine_latest.dart:330:26)
#10     _RootZone.runUnaryGuarded (dart:async/zone.dart:1778:10)
#11     _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:381:11)
#12     _BufferingStreamSubscription._add (dart:async/stream_impl.dart:312:7)
#13     _SyncStreamControllerDispatch._sendData (dart:async/stream_controller.dart:798:19)
#14     _StreamController._add (dart:async/stream_controller.dart:663:7)
#15     _StreamController.add (dart:async/stream_controller.dart:618:5)
#16     _AsyncStarStreamController.add (dart:async-patch/async_patch.dart:80:16)
#17     DocP.build.<anonymous closure> (package:my_wear_app/presenation/module/pages/doc_page/module.dart)
<asynchronous suspension>
#18     _StreamController.addError (dart:async/stream_controller.dart:622:3)
<asynchronous suspension>
#19     Subject.add (package:rxdart/src/subjects/subject.dart:134:3)
<asynchronous suspension>

apply_updates: Starting with 64 updates for doc_id: xxx
apply_updates: Starting with 64 updates for doc_id: xxx
apply_updates: Applying update for doc_id: xxx
apply_updates: Finished for doc_id: xxx
apply_updates: Successfully applied updates for doc_id: xxx
get_document_state: Starting for doc_id: xxx
extract_document_state: Starting for doc_id: xxx
extract_document_state: Processing 12 blocks
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 0 deltas
deltas_to_json: Converting 1 deltas
deltas_to_json: Converting 1 deltas
====== STARTING BLOCK SORTING ======
Input children_map has 12 parent nodes

----- Sorting children of parent: 10FIbm -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 10FIbm: []

----- Sorting children of parent: 3Z41Cs -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent 3Z41Cs: []

----- Sorting children of parent: E0I6nz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent E0I6nz: []

----- Sorting children of parent: mHZ7ii -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent mHZ7ii: []

----- Sorting children of parent: DpaQNz -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DpaQNz: []

----- Sorting children of parent: bXY0mr -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent bXY0mr: []

----- Sorting children of parent: QZg5hQ -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent QZg5hQ: []

----- Sorting children of parent: PTZoKi -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent PTZoKi: []

----- Sorting children of parent: qqi_hW -----
Parent has 11 children to sort
Mapped 11 valid blocks by ID
Block VYlaMd assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block s4G6zw assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block 10FIbm assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block bXY0mr assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block PTZoKi assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block E0I6nz assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block DpaQNz assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block mHZ7ii assigned to device 8e75fdcd-52ee-4972-8175-e5140fe14fe7
Block QZg5hQ assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Block DbA7yH assigned to device aaa770e7-3141-458d-a787-bacf43ac1a1f
Block 3Z41Cs assigned to device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Grouped blocks into 3 devices
  - Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has 6 blocks
  - Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 3 blocks
  - Device aaa770e7-3141-458d-a787-bacf43ac1a1f has 2 blocks
Block VYlaMd has prev_id DbA7yH
Block s4G6zw has prev_id DpaQNz
Block 10FIbm has prev_id VYlaMd
Block bXY0mr has prev_id 10FIbm
Block PTZoKi has prev_id bXY0mr
Block E0I6nz has prev_id PTZoKi
Block DpaQNz has prev_id QZg5hQ
Block mHZ7ii has prev_id E0I6nz
Block QZg5hQ has no prev_id
Block DbA7yH has prev_id s4G6zw
Block 3Z41Cs has no prev_id
Built prev->next map with 9 entries
  - VYlaMd has 1 next blocks: ["10FIbm"]
  - DpaQNz has 1 next blocks: ["s4G6zw"]
  - PTZoKi has 1 next blocks: ["E0I6nz"]
  - QZg5hQ has 1 next blocks: ["DpaQNz"]
  - 10FIbm has 1 next blocks: ["bXY0mr"]
  - E0I6nz has 1 next blocks: ["mHZ7ii"]
  - DbA7yH has 1 next blocks: ["VYlaMd"]
  - s4G6zw has 1 next blocks: ["DbA7yH"]
  - bXY0mr has 1 next blocks: ["PTZoKi"]
Device 8e75fdcd-52ee-4972-8175-e5140fe14fe7 has no root blocks
Device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79 has 2 root blocks: ["QZg5hQ", "3Z41Cs"]
Device aaa770e7-3141-458d-a787-bacf43ac1a1f has no root blocks
Processing devices in order: ["8e75fdcd-52ee-4972-8175-e5140fe14fe7", "aaa770e7-3141-458d-a787-bacf43ac1a1f", "bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79"]

Processing device: 8e75fdcd-52ee-4972-8175-e5140fe14fe7
No roots for device 8e75fdcd-52ee-4972-8175-e5140fe14fe7, skipping

Processing device: aaa770e7-3141-458d-a787-bacf43ac1a1f
No roots for device aaa770e7-3141-458d-a787-bacf43ac1a1f, skipping

Processing device: bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
Comparing root blocks: 3Z41Cs (time: 2025-03-26T13:05:58.979981) vs QZg5hQ (time: 2025-03-26T13:06:00.601337)
Sorted roots for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79: ["3Z41Cs", "QZg5hQ"]
Starting chain from root: 3Z41Cs
  Adding block 3Z41Cs to sorted list
  No next blocks for 3Z41Cs
Starting chain from root: QZg5hQ
  Adding block QZg5hQ to sorted list
    Pushing DpaQNz onto stack
  Adding block DpaQNz to sorted list
    Pushing s4G6zw onto stack
  Adding block s4G6zw to sorted list
    Pushing DbA7yH onto stack
  Adding block DbA7yH to sorted list
    Pushing VYlaMd onto stack
  Adding block VYlaMd to sorted list
    Pushing 10FIbm onto stack
  Adding block 10FIbm to sorted list
    Pushing bXY0mr onto stack
  Adding block bXY0mr to sorted list
    Pushing PTZoKi onto stack
  Adding block PTZoKi to sorted list
    Pushing E0I6nz onto stack
  Adding block E0I6nz to sorted list
    Pushing mHZ7ii onto stack
  Adding block mHZ7ii to sorted list
  No next blocks for mHZ7ii
No remaining blocks for device bbe503ce-7bb4-4f9f-8a6b-9bae65d8ab79
No globally remaining blocks
Final sorted order for parent qqi_hW: ["3Z41Cs", "QZg5hQ", "DpaQNz", "s4G6zw", "DbA7yH", "VYlaMd", "10FIbm", "bXY0mr", "PTZoKi", "E0I6nz", "mHZ7ii"]

----- Sorting children of parent: DbA7yH -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent DbA7yH: []

----- Sorting children of parent: s4G6zw -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent s4G6zw: []

----- Sorting children of parent: VYlaMd -----
Parent has 0 children to sort
Mapped 0 valid blocks by ID
Grouped blocks into 0 devices
Built prev->next map with 0 entries
Processing devices in order: []
No globally remaining blocks
Final sorted order for parent VYlaMd: []
====== COMPLETED BLOCK SORTING ======
Final sorted children map has 12 parents
extract_document_state: Extracted 12 blocks and 12 parent-child relationships
get_document_state: Finished for doc_id: xxx
